{"version":3,"file":"accounts-sdk.min.js","sources":["../src/helpers/errors.js","../src/helpers/listener.js","../src/authentication/popup.js","../node_modules/qs/lib/utils.js","../node_modules/qs/lib/formats.js","../node_modules/qs/lib/stringify.js","../node_modules/qs/lib/parse.js","../src/helpers/object.js","../src/authentication/redirect.js","../src/authentication/iframe.js","../src/helpers/random.js","../src/helpers/storage/dummy.js","../node_modules/js-cookie/src/js.cookie.js","../src/helpers/storage/cookie.js","../src/helpers/storage/handler.js","../src/helpers/storage.js","../src/authentication/transaction.js","../src/vendor/sjcl.js","../src/helpers/encoding.js","../src/sdk.js"],"sourcesContent":["export default {\n  extend: function (error) {\n    if (error.oauth_exception && this.oauth_exception[error.oauth_exception]) {\n      return Object.assign(error, {\n        description: this.oauth_exception[error.oauth_exception],\n      });\n    }\n\n    if (\n      error.identity_exception &&\n      this.identity_exception[error.identity_exception]\n    ) {\n      return Object.assign(error, {\n        description: this.identity_exception[error.identity_exception],\n      });\n    }\n\n    return error;\n  },\n  oauth_exception: {\n    invalid_request:\n      'You may be loading accounts-sdk on a domain that is not whitelisted.',\n\n    unauthorized_client:\n      'Client not found, not provided or incorectly configured.',\n\n    access_denied:\n      'Probably this application is installed on a different account and you do not have access to it.',\n\n    unsupported_response_type:\n      'Provided response type is incorrect or unavailable for a given client.',\n  },\n  identity_exception: {\n    unauthorized: 'Resource owner identity is not known or consent is missing.',\n  },\n};\n","/* eslint-disable require-jsdoc */\nimport './errors';\nimport errors from './errors';\nexport default class Listener {\n  constructor(options = {}) {\n    this.options = options;\n    this.listening = false;\n\n    this.receiveMessage = this.receiveMessage.bind(this);\n  }\n\n  start(timeout, callback) {\n    if (this._listenerInited) {\n      return;\n    }\n    this.listening = true;\n    this.callback = callback;\n\n    if (timeout) {\n      this.tid = setTimeout(() => {\n        this.stop();\n        callback('timeout', null);\n      }, timeout);\n    }\n\n    window.addEventListener('message', this.receiveMessage);\n  }\n\n  stop() {\n    this.listening = false;\n    clearTimeout(this.tid);\n    window.removeEventListener('message', this.receiveMessage, false);\n  }\n\n  receiveMessage(event) {\n    if (\n      event.origin !== this.options.server_url &&\n      event.origin !==\n        this.options.server_url.replace(/livechat\\.com$/, 'livechatinc.com')\n    ) {\n      return;\n    }\n\n    if (!event.data.data && !event.data.error) {\n      return;\n    }\n\n    this.stop();\n\n    if (event.data.error) {\n      this.callback(errors.extend(event.data.error), null);\n    } else {\n      if (event.data.data.scopes) {\n        event.data.data.scope = event.data.data.scopes;\n        delete event.data.data.scopes;\n      }\n      if (event.data.data.expires_in) {\n        event.data.data.expires_in = parseInt(event.data.data.expires_in) || 0;\n      }\n      this.callback(null, event.data.data);\n    }\n  }\n}\n","import Listener from '../helpers/listener';\n/**\n * Class for authentication using popup.\n */\nexport default class Popup {\n  // eslint-disable-next-line require-jsdoc\n  constructor(sdk, options) {\n    this.options = options;\n    this.sdk = sdk;\n  }\n\n  /**\n   * run popup authorization flow, should be called in a click handler to avoid beeing blocked\n   * @return {Promise} promise that resolves to authorize data or error\n   */\n  authorize() {\n    return new Promise((resolve, reject) => {\n      const url = this.sdk.authorizeURL(this.options, 'button');\n\n      const w = 500;\n      const h = 650;\n      const left = window.screen.width / 2 - w / 2;\n      const top = window.screen.height / 2 - h / 2;\n\n      const listener = new Listener(this.options);\n      listener.start(null, (err, authorizeData) => {\n        if (err) {\n          return reject(err);\n        }\n        resolve(authorizeData);\n      });\n\n      var open = function () {\n        window.open(\n          url,\n          'livechat-login-popup',\n          `resizable,scrollbars,width=${w},height=${h},left=${left},top=${top}`\n        );\n      };\n\n      if (document.requestStorageAccess) {\n        var promise = document.requestStorageAccess();\n        promise.then(open, open);\n      } else {\n        open();\n      }\n    });\n  }\n}\n","'use strict';\n\nvar has = Object.prototype.hasOwnProperty;\nvar isArray = Array.isArray;\n\nvar hexTable = (function () {\n    var array = [];\n    for (var i = 0; i < 256; ++i) {\n        array.push('%' + ((i < 16 ? '0' : '') + i.toString(16)).toUpperCase());\n    }\n\n    return array;\n}());\n\nvar compactQueue = function compactQueue(queue) {\n    while (queue.length > 1) {\n        var item = queue.pop();\n        var obj = item.obj[item.prop];\n\n        if (isArray(obj)) {\n            var compacted = [];\n\n            for (var j = 0; j < obj.length; ++j) {\n                if (typeof obj[j] !== 'undefined') {\n                    compacted.push(obj[j]);\n                }\n            }\n\n            item.obj[item.prop] = compacted;\n        }\n    }\n};\n\nvar arrayToObject = function arrayToObject(source, options) {\n    var obj = options && options.plainObjects ? Object.create(null) : {};\n    for (var i = 0; i < source.length; ++i) {\n        if (typeof source[i] !== 'undefined') {\n            obj[i] = source[i];\n        }\n    }\n\n    return obj;\n};\n\nvar merge = function merge(target, source, options) {\n    /* eslint no-param-reassign: 0 */\n    if (!source) {\n        return target;\n    }\n\n    if (typeof source !== 'object') {\n        if (isArray(target)) {\n            target.push(source);\n        } else if (target && typeof target === 'object') {\n            if ((options && (options.plainObjects || options.allowPrototypes)) || !has.call(Object.prototype, source)) {\n                target[source] = true;\n            }\n        } else {\n            return [target, source];\n        }\n\n        return target;\n    }\n\n    if (!target || typeof target !== 'object') {\n        return [target].concat(source);\n    }\n\n    var mergeTarget = target;\n    if (isArray(target) && !isArray(source)) {\n        mergeTarget = arrayToObject(target, options);\n    }\n\n    if (isArray(target) && isArray(source)) {\n        source.forEach(function (item, i) {\n            if (has.call(target, i)) {\n                var targetItem = target[i];\n                if (targetItem && typeof targetItem === 'object' && item && typeof item === 'object') {\n                    target[i] = merge(targetItem, item, options);\n                } else {\n                    target.push(item);\n                }\n            } else {\n                target[i] = item;\n            }\n        });\n        return target;\n    }\n\n    return Object.keys(source).reduce(function (acc, key) {\n        var value = source[key];\n\n        if (has.call(acc, key)) {\n            acc[key] = merge(acc[key], value, options);\n        } else {\n            acc[key] = value;\n        }\n        return acc;\n    }, mergeTarget);\n};\n\nvar assign = function assignSingleSource(target, source) {\n    return Object.keys(source).reduce(function (acc, key) {\n        acc[key] = source[key];\n        return acc;\n    }, target);\n};\n\nvar decode = function (str, decoder, charset) {\n    var strWithoutPlus = str.replace(/\\+/g, ' ');\n    if (charset === 'iso-8859-1') {\n        // unescape never throws, no try...catch needed:\n        return strWithoutPlus.replace(/%[0-9a-f]{2}/gi, unescape);\n    }\n    // utf-8\n    try {\n        return decodeURIComponent(strWithoutPlus);\n    } catch (e) {\n        return strWithoutPlus;\n    }\n};\n\nvar encode = function encode(str, defaultEncoder, charset) {\n    // This code was originally written by Brian White (mscdex) for the io.js core querystring library.\n    // It has been adapted here for stricter adherence to RFC 3986\n    if (str.length === 0) {\n        return str;\n    }\n\n    var string = str;\n    if (typeof str === 'symbol') {\n        string = Symbol.prototype.toString.call(str);\n    } else if (typeof str !== 'string') {\n        string = String(str);\n    }\n\n    if (charset === 'iso-8859-1') {\n        return escape(string).replace(/%u[0-9a-f]{4}/gi, function ($0) {\n            return '%26%23' + parseInt($0.slice(2), 16) + '%3B';\n        });\n    }\n\n    var out = '';\n    for (var i = 0; i < string.length; ++i) {\n        var c = string.charCodeAt(i);\n\n        if (\n            c === 0x2D // -\n            || c === 0x2E // .\n            || c === 0x5F // _\n            || c === 0x7E // ~\n            || (c >= 0x30 && c <= 0x39) // 0-9\n            || (c >= 0x41 && c <= 0x5A) // a-z\n            || (c >= 0x61 && c <= 0x7A) // A-Z\n        ) {\n            out += string.charAt(i);\n            continue;\n        }\n\n        if (c < 0x80) {\n            out = out + hexTable[c];\n            continue;\n        }\n\n        if (c < 0x800) {\n            out = out + (hexTable[0xC0 | (c >> 6)] + hexTable[0x80 | (c & 0x3F)]);\n            continue;\n        }\n\n        if (c < 0xD800 || c >= 0xE000) {\n            out = out + (hexTable[0xE0 | (c >> 12)] + hexTable[0x80 | ((c >> 6) & 0x3F)] + hexTable[0x80 | (c & 0x3F)]);\n            continue;\n        }\n\n        i += 1;\n        c = 0x10000 + (((c & 0x3FF) << 10) | (string.charCodeAt(i) & 0x3FF));\n        out += hexTable[0xF0 | (c >> 18)]\n            + hexTable[0x80 | ((c >> 12) & 0x3F)]\n            + hexTable[0x80 | ((c >> 6) & 0x3F)]\n            + hexTable[0x80 | (c & 0x3F)];\n    }\n\n    return out;\n};\n\nvar compact = function compact(value) {\n    var queue = [{ obj: { o: value }, prop: 'o' }];\n    var refs = [];\n\n    for (var i = 0; i < queue.length; ++i) {\n        var item = queue[i];\n        var obj = item.obj[item.prop];\n\n        var keys = Object.keys(obj);\n        for (var j = 0; j < keys.length; ++j) {\n            var key = keys[j];\n            var val = obj[key];\n            if (typeof val === 'object' && val !== null && refs.indexOf(val) === -1) {\n                queue.push({ obj: obj, prop: key });\n                refs.push(val);\n            }\n        }\n    }\n\n    compactQueue(queue);\n\n    return value;\n};\n\nvar isRegExp = function isRegExp(obj) {\n    return Object.prototype.toString.call(obj) === '[object RegExp]';\n};\n\nvar isBuffer = function isBuffer(obj) {\n    if (!obj || typeof obj !== 'object') {\n        return false;\n    }\n\n    return !!(obj.constructor && obj.constructor.isBuffer && obj.constructor.isBuffer(obj));\n};\n\nvar combine = function combine(a, b) {\n    return [].concat(a, b);\n};\n\nvar maybeMap = function maybeMap(val, fn) {\n    if (isArray(val)) {\n        var mapped = [];\n        for (var i = 0; i < val.length; i += 1) {\n            mapped.push(fn(val[i]));\n        }\n        return mapped;\n    }\n    return fn(val);\n};\n\nmodule.exports = {\n    arrayToObject: arrayToObject,\n    assign: assign,\n    combine: combine,\n    compact: compact,\n    decode: decode,\n    encode: encode,\n    isBuffer: isBuffer,\n    isRegExp: isRegExp,\n    maybeMap: maybeMap,\n    merge: merge\n};\n","'use strict';\n\nvar replace = String.prototype.replace;\nvar percentTwenties = /%20/g;\n\nvar util = require('./utils');\n\nvar Format = {\n    RFC1738: 'RFC1738',\n    RFC3986: 'RFC3986'\n};\n\nmodule.exports = util.assign(\n    {\n        'default': Format.RFC3986,\n        formatters: {\n            RFC1738: function (value) {\n                return replace.call(value, percentTwenties, '+');\n            },\n            RFC3986: function (value) {\n                return String(value);\n            }\n        }\n    },\n    Format\n);\n","'use strict';\n\nvar utils = require('./utils');\nvar formats = require('./formats');\nvar has = Object.prototype.hasOwnProperty;\n\nvar arrayPrefixGenerators = {\n    brackets: function brackets(prefix) {\n        return prefix + '[]';\n    },\n    comma: 'comma',\n    indices: function indices(prefix, key) {\n        return prefix + '[' + key + ']';\n    },\n    repeat: function repeat(prefix) {\n        return prefix;\n    }\n};\n\nvar isArray = Array.isArray;\nvar push = Array.prototype.push;\nvar pushToArray = function (arr, valueOrArray) {\n    push.apply(arr, isArray(valueOrArray) ? valueOrArray : [valueOrArray]);\n};\n\nvar toISO = Date.prototype.toISOString;\n\nvar defaultFormat = formats['default'];\nvar defaults = {\n    addQueryPrefix: false,\n    allowDots: false,\n    charset: 'utf-8',\n    charsetSentinel: false,\n    delimiter: '&',\n    encode: true,\n    encoder: utils.encode,\n    encodeValuesOnly: false,\n    format: defaultFormat,\n    formatter: formats.formatters[defaultFormat],\n    // deprecated\n    indices: false,\n    serializeDate: function serializeDate(date) {\n        return toISO.call(date);\n    },\n    skipNulls: false,\n    strictNullHandling: false\n};\n\nvar isNonNullishPrimitive = function isNonNullishPrimitive(v) {\n    return typeof v === 'string'\n        || typeof v === 'number'\n        || typeof v === 'boolean'\n        || typeof v === 'symbol'\n        || typeof v === 'bigint';\n};\n\nvar stringify = function stringify(\n    object,\n    prefix,\n    generateArrayPrefix,\n    strictNullHandling,\n    skipNulls,\n    encoder,\n    filter,\n    sort,\n    allowDots,\n    serializeDate,\n    formatter,\n    encodeValuesOnly,\n    charset\n) {\n    var obj = object;\n    if (typeof filter === 'function') {\n        obj = filter(prefix, obj);\n    } else if (obj instanceof Date) {\n        obj = serializeDate(obj);\n    } else if (generateArrayPrefix === 'comma' && isArray(obj)) {\n        obj = utils.maybeMap(obj, function (value) {\n            if (value instanceof Date) {\n                return serializeDate(value);\n            }\n            return value;\n        }).join(',');\n    }\n\n    if (obj === null) {\n        if (strictNullHandling) {\n            return encoder && !encodeValuesOnly ? encoder(prefix, defaults.encoder, charset, 'key') : prefix;\n        }\n\n        obj = '';\n    }\n\n    if (isNonNullishPrimitive(obj) || utils.isBuffer(obj)) {\n        if (encoder) {\n            var keyValue = encodeValuesOnly ? prefix : encoder(prefix, defaults.encoder, charset, 'key');\n            return [formatter(keyValue) + '=' + formatter(encoder(obj, defaults.encoder, charset, 'value'))];\n        }\n        return [formatter(prefix) + '=' + formatter(String(obj))];\n    }\n\n    var values = [];\n\n    if (typeof obj === 'undefined') {\n        return values;\n    }\n\n    var objKeys;\n    if (isArray(filter)) {\n        objKeys = filter;\n    } else {\n        var keys = Object.keys(obj);\n        objKeys = sort ? keys.sort(sort) : keys;\n    }\n\n    for (var i = 0; i < objKeys.length; ++i) {\n        var key = objKeys[i];\n        var value = obj[key];\n\n        if (skipNulls && value === null) {\n            continue;\n        }\n\n        var keyPrefix = isArray(obj)\n            ? typeof generateArrayPrefix === 'function' ? generateArrayPrefix(prefix, key) : prefix\n            : prefix + (allowDots ? '.' + key : '[' + key + ']');\n\n        pushToArray(values, stringify(\n            value,\n            keyPrefix,\n            generateArrayPrefix,\n            strictNullHandling,\n            skipNulls,\n            encoder,\n            filter,\n            sort,\n            allowDots,\n            serializeDate,\n            formatter,\n            encodeValuesOnly,\n            charset\n        ));\n    }\n\n    return values;\n};\n\nvar normalizeStringifyOptions = function normalizeStringifyOptions(opts) {\n    if (!opts) {\n        return defaults;\n    }\n\n    if (opts.encoder !== null && opts.encoder !== undefined && typeof opts.encoder !== 'function') {\n        throw new TypeError('Encoder has to be a function.');\n    }\n\n    var charset = opts.charset || defaults.charset;\n    if (typeof opts.charset !== 'undefined' && opts.charset !== 'utf-8' && opts.charset !== 'iso-8859-1') {\n        throw new TypeError('The charset option must be either utf-8, iso-8859-1, or undefined');\n    }\n\n    var format = formats['default'];\n    if (typeof opts.format !== 'undefined') {\n        if (!has.call(formats.formatters, opts.format)) {\n            throw new TypeError('Unknown format option provided.');\n        }\n        format = opts.format;\n    }\n    var formatter = formats.formatters[format];\n\n    var filter = defaults.filter;\n    if (typeof opts.filter === 'function' || isArray(opts.filter)) {\n        filter = opts.filter;\n    }\n\n    return {\n        addQueryPrefix: typeof opts.addQueryPrefix === 'boolean' ? opts.addQueryPrefix : defaults.addQueryPrefix,\n        allowDots: typeof opts.allowDots === 'undefined' ? defaults.allowDots : !!opts.allowDots,\n        charset: charset,\n        charsetSentinel: typeof opts.charsetSentinel === 'boolean' ? opts.charsetSentinel : defaults.charsetSentinel,\n        delimiter: typeof opts.delimiter === 'undefined' ? defaults.delimiter : opts.delimiter,\n        encode: typeof opts.encode === 'boolean' ? opts.encode : defaults.encode,\n        encoder: typeof opts.encoder === 'function' ? opts.encoder : defaults.encoder,\n        encodeValuesOnly: typeof opts.encodeValuesOnly === 'boolean' ? opts.encodeValuesOnly : defaults.encodeValuesOnly,\n        filter: filter,\n        formatter: formatter,\n        serializeDate: typeof opts.serializeDate === 'function' ? opts.serializeDate : defaults.serializeDate,\n        skipNulls: typeof opts.skipNulls === 'boolean' ? opts.skipNulls : defaults.skipNulls,\n        sort: typeof opts.sort === 'function' ? opts.sort : null,\n        strictNullHandling: typeof opts.strictNullHandling === 'boolean' ? opts.strictNullHandling : defaults.strictNullHandling\n    };\n};\n\nmodule.exports = function (object, opts) {\n    var obj = object;\n    var options = normalizeStringifyOptions(opts);\n\n    var objKeys;\n    var filter;\n\n    if (typeof options.filter === 'function') {\n        filter = options.filter;\n        obj = filter('', obj);\n    } else if (isArray(options.filter)) {\n        filter = options.filter;\n        objKeys = filter;\n    }\n\n    var keys = [];\n\n    if (typeof obj !== 'object' || obj === null) {\n        return '';\n    }\n\n    var arrayFormat;\n    if (opts && opts.arrayFormat in arrayPrefixGenerators) {\n        arrayFormat = opts.arrayFormat;\n    } else if (opts && 'indices' in opts) {\n        arrayFormat = opts.indices ? 'indices' : 'repeat';\n    } else {\n        arrayFormat = 'indices';\n    }\n\n    var generateArrayPrefix = arrayPrefixGenerators[arrayFormat];\n\n    if (!objKeys) {\n        objKeys = Object.keys(obj);\n    }\n\n    if (options.sort) {\n        objKeys.sort(options.sort);\n    }\n\n    for (var i = 0; i < objKeys.length; ++i) {\n        var key = objKeys[i];\n\n        if (options.skipNulls && obj[key] === null) {\n            continue;\n        }\n        pushToArray(keys, stringify(\n            obj[key],\n            key,\n            generateArrayPrefix,\n            options.strictNullHandling,\n            options.skipNulls,\n            options.encode ? options.encoder : null,\n            options.filter,\n            options.sort,\n            options.allowDots,\n            options.serializeDate,\n            options.formatter,\n            options.encodeValuesOnly,\n            options.charset\n        ));\n    }\n\n    var joined = keys.join(options.delimiter);\n    var prefix = options.addQueryPrefix === true ? '?' : '';\n\n    if (options.charsetSentinel) {\n        if (options.charset === 'iso-8859-1') {\n            // encodeURIComponent('&#10003;'), the \"numeric entity\" representation of a checkmark\n            prefix += 'utf8=%26%2310003%3B&';\n        } else {\n            // encodeURIComponent('✓')\n            prefix += 'utf8=%E2%9C%93&';\n        }\n    }\n\n    return joined.length > 0 ? prefix + joined : '';\n};\n","'use strict';\n\nvar utils = require('./utils');\n\nvar has = Object.prototype.hasOwnProperty;\nvar isArray = Array.isArray;\n\nvar defaults = {\n    allowDots: false,\n    allowPrototypes: false,\n    arrayLimit: 20,\n    charset: 'utf-8',\n    charsetSentinel: false,\n    comma: false,\n    decoder: utils.decode,\n    delimiter: '&',\n    depth: 5,\n    ignoreQueryPrefix: false,\n    interpretNumericEntities: false,\n    parameterLimit: 1000,\n    parseArrays: true,\n    plainObjects: false,\n    strictNullHandling: false\n};\n\nvar interpretNumericEntities = function (str) {\n    return str.replace(/&#(\\d+);/g, function ($0, numberStr) {\n        return String.fromCharCode(parseInt(numberStr, 10));\n    });\n};\n\nvar parseArrayValue = function (val, options) {\n    if (val && typeof val === 'string' && options.comma && val.indexOf(',') > -1) {\n        return val.split(',');\n    }\n\n    return val;\n};\n\n// This is what browsers will submit when the ✓ character occurs in an\n// application/x-www-form-urlencoded body and the encoding of the page containing\n// the form is iso-8859-1, or when the submitted form has an accept-charset\n// attribute of iso-8859-1. Presumably also with other charsets that do not contain\n// the ✓ character, such as us-ascii.\nvar isoSentinel = 'utf8=%26%2310003%3B'; // encodeURIComponent('&#10003;')\n\n// These are the percent-encoded utf-8 octets representing a checkmark, indicating that the request actually is utf-8 encoded.\nvar charsetSentinel = 'utf8=%E2%9C%93'; // encodeURIComponent('✓')\n\nvar parseValues = function parseQueryStringValues(str, options) {\n    var obj = {};\n    var cleanStr = options.ignoreQueryPrefix ? str.replace(/^\\?/, '') : str;\n    var limit = options.parameterLimit === Infinity ? undefined : options.parameterLimit;\n    var parts = cleanStr.split(options.delimiter, limit);\n    var skipIndex = -1; // Keep track of where the utf8 sentinel was found\n    var i;\n\n    var charset = options.charset;\n    if (options.charsetSentinel) {\n        for (i = 0; i < parts.length; ++i) {\n            if (parts[i].indexOf('utf8=') === 0) {\n                if (parts[i] === charsetSentinel) {\n                    charset = 'utf-8';\n                } else if (parts[i] === isoSentinel) {\n                    charset = 'iso-8859-1';\n                }\n                skipIndex = i;\n                i = parts.length; // The eslint settings do not allow break;\n            }\n        }\n    }\n\n    for (i = 0; i < parts.length; ++i) {\n        if (i === skipIndex) {\n            continue;\n        }\n        var part = parts[i];\n\n        var bracketEqualsPos = part.indexOf(']=');\n        var pos = bracketEqualsPos === -1 ? part.indexOf('=') : bracketEqualsPos + 1;\n\n        var key, val;\n        if (pos === -1) {\n            key = options.decoder(part, defaults.decoder, charset, 'key');\n            val = options.strictNullHandling ? null : '';\n        } else {\n            key = options.decoder(part.slice(0, pos), defaults.decoder, charset, 'key');\n            val = utils.maybeMap(\n                parseArrayValue(part.slice(pos + 1), options),\n                function (encodedVal) {\n                    return options.decoder(encodedVal, defaults.decoder, charset, 'value');\n                }\n            );\n        }\n\n        if (val && options.interpretNumericEntities && charset === 'iso-8859-1') {\n            val = interpretNumericEntities(val);\n        }\n\n        if (part.indexOf('[]=') > -1) {\n            val = isArray(val) ? [val] : val;\n        }\n\n        if (has.call(obj, key)) {\n            obj[key] = utils.combine(obj[key], val);\n        } else {\n            obj[key] = val;\n        }\n    }\n\n    return obj;\n};\n\nvar parseObject = function (chain, val, options, valuesParsed) {\n    var leaf = valuesParsed ? val : parseArrayValue(val, options);\n\n    for (var i = chain.length - 1; i >= 0; --i) {\n        var obj;\n        var root = chain[i];\n\n        if (root === '[]' && options.parseArrays) {\n            obj = [].concat(leaf);\n        } else {\n            obj = options.plainObjects ? Object.create(null) : {};\n            var cleanRoot = root.charAt(0) === '[' && root.charAt(root.length - 1) === ']' ? root.slice(1, -1) : root;\n            var index = parseInt(cleanRoot, 10);\n            if (!options.parseArrays && cleanRoot === '') {\n                obj = { 0: leaf };\n            } else if (\n                !isNaN(index)\n                && root !== cleanRoot\n                && String(index) === cleanRoot\n                && index >= 0\n                && (options.parseArrays && index <= options.arrayLimit)\n            ) {\n                obj = [];\n                obj[index] = leaf;\n            } else {\n                obj[cleanRoot] = leaf;\n            }\n        }\n\n        leaf = obj; // eslint-disable-line no-param-reassign\n    }\n\n    return leaf;\n};\n\nvar parseKeys = function parseQueryStringKeys(givenKey, val, options, valuesParsed) {\n    if (!givenKey) {\n        return;\n    }\n\n    // Transform dot notation to bracket notation\n    var key = options.allowDots ? givenKey.replace(/\\.([^.[]+)/g, '[$1]') : givenKey;\n\n    // The regex chunks\n\n    var brackets = /(\\[[^[\\]]*])/;\n    var child = /(\\[[^[\\]]*])/g;\n\n    // Get the parent\n\n    var segment = options.depth > 0 && brackets.exec(key);\n    var parent = segment ? key.slice(0, segment.index) : key;\n\n    // Stash the parent if it exists\n\n    var keys = [];\n    if (parent) {\n        // If we aren't using plain objects, optionally prefix keys that would overwrite object prototype properties\n        if (!options.plainObjects && has.call(Object.prototype, parent)) {\n            if (!options.allowPrototypes) {\n                return;\n            }\n        }\n\n        keys.push(parent);\n    }\n\n    // Loop through children appending to the array until we hit depth\n\n    var i = 0;\n    while (options.depth > 0 && (segment = child.exec(key)) !== null && i < options.depth) {\n        i += 1;\n        if (!options.plainObjects && has.call(Object.prototype, segment[1].slice(1, -1))) {\n            if (!options.allowPrototypes) {\n                return;\n            }\n        }\n        keys.push(segment[1]);\n    }\n\n    // If there's a remainder, just add whatever is left\n\n    if (segment) {\n        keys.push('[' + key.slice(segment.index) + ']');\n    }\n\n    return parseObject(keys, val, options, valuesParsed);\n};\n\nvar normalizeParseOptions = function normalizeParseOptions(opts) {\n    if (!opts) {\n        return defaults;\n    }\n\n    if (opts.decoder !== null && opts.decoder !== undefined && typeof opts.decoder !== 'function') {\n        throw new TypeError('Decoder has to be a function.');\n    }\n\n    if (typeof opts.charset !== 'undefined' && opts.charset !== 'utf-8' && opts.charset !== 'iso-8859-1') {\n        throw new TypeError('The charset option must be either utf-8, iso-8859-1, or undefined');\n    }\n    var charset = typeof opts.charset === 'undefined' ? defaults.charset : opts.charset;\n\n    return {\n        allowDots: typeof opts.allowDots === 'undefined' ? defaults.allowDots : !!opts.allowDots,\n        allowPrototypes: typeof opts.allowPrototypes === 'boolean' ? opts.allowPrototypes : defaults.allowPrototypes,\n        arrayLimit: typeof opts.arrayLimit === 'number' ? opts.arrayLimit : defaults.arrayLimit,\n        charset: charset,\n        charsetSentinel: typeof opts.charsetSentinel === 'boolean' ? opts.charsetSentinel : defaults.charsetSentinel,\n        comma: typeof opts.comma === 'boolean' ? opts.comma : defaults.comma,\n        decoder: typeof opts.decoder === 'function' ? opts.decoder : defaults.decoder,\n        delimiter: typeof opts.delimiter === 'string' || utils.isRegExp(opts.delimiter) ? opts.delimiter : defaults.delimiter,\n        // eslint-disable-next-line no-implicit-coercion, no-extra-parens\n        depth: (typeof opts.depth === 'number' || opts.depth === false) ? +opts.depth : defaults.depth,\n        ignoreQueryPrefix: opts.ignoreQueryPrefix === true,\n        interpretNumericEntities: typeof opts.interpretNumericEntities === 'boolean' ? opts.interpretNumericEntities : defaults.interpretNumericEntities,\n        parameterLimit: typeof opts.parameterLimit === 'number' ? opts.parameterLimit : defaults.parameterLimit,\n        parseArrays: opts.parseArrays !== false,\n        plainObjects: typeof opts.plainObjects === 'boolean' ? opts.plainObjects : defaults.plainObjects,\n        strictNullHandling: typeof opts.strictNullHandling === 'boolean' ? opts.strictNullHandling : defaults.strictNullHandling\n    };\n};\n\nmodule.exports = function (str, opts) {\n    var options = normalizeParseOptions(opts);\n\n    if (str === '' || str === null || typeof str === 'undefined') {\n        return options.plainObjects ? Object.create(null) : {};\n    }\n\n    var tempObj = typeof str === 'string' ? parseValues(str, options) : str;\n    var obj = options.plainObjects ? Object.create(null) : {};\n\n    // Iterate over the keys and setup the new object\n\n    var keys = Object.keys(tempObj);\n    for (var i = 0; i < keys.length; ++i) {\n        var key = keys[i];\n        var newObj = parseKeys(key, tempObj[key], options, typeof str === 'string');\n        obj = utils.merge(obj, newObj, options);\n    }\n\n    return utils.compact(obj);\n};\n","/* eslint-disable require-jsdoc */\n\n/** @fileOverview\n * @author Auth0 https://github.com/auth0/auth0.js\n * @license MIT\n */\n\nexport function pick(object, keys) {\n  return keys.reduce((prev, key) => {\n    if (object[key]) {\n      prev[key] = object[key];\n    }\n    return prev;\n  }, {});\n}\n","import errors from '../helpers/errors';\nimport qs from 'qs';\nimport {pick} from '../helpers/object';\n\n// eslint-disable-next-line require-jsdoc\nexport default class Redirect {\n  // eslint-disable-next-line require-jsdoc\n  constructor(sdk, options) {\n    this.options = options;\n    this.sdk = sdk;\n  }\n\n  /**\n   * run default authorization flow\n   */\n  authorize() {\n    const url = this.sdk.authorizeURL(this.options);\n    window.location = url;\n  }\n\n  /**\n   * this function checks if the current origin was redirected to with authorize data\n   * @return {Promise} promise that resolves to authorize data or error\n   */\n  authorizeData() {\n    return new Promise((resolve, reject) => {\n      let authorizeData = {};\n      let requiredFields = [];\n\n      switch (this.options.response_type) {\n        case 'token':\n          requiredFields = ['access_token', 'expires_in', 'token_type'];\n\n          authorizeData = qs.parse(window.location.hash.substring(1));\n          authorizeData = pick(authorizeData, [\n            'access_token',\n            'expires_in',\n            'state',\n            'scope',\n            'token_type',\n          ]);\n\n          if (\n            !requiredFields.every((field) =>\n              authorizeData.hasOwnProperty(field)\n            )\n          ) {\n            reject(errors.extend({identity_exception: 'unauthorized'}));\n            return;\n          }\n\n          authorizeData.expires_in = parseInt(authorizeData.expires_in);\n          break;\n\n        case 'code':\n          requiredFields = ['code'];\n\n          authorizeData = qs.parse(window.location.search, {\n            ignoreQueryPrefix: true,\n          });\n          authorizeData = pick(authorizeData, ['state', 'code']);\n\n          if (\n            !requiredFields.every((field) =>\n              authorizeData.hasOwnProperty(field)\n            )\n          ) {\n            reject(errors.extend({identity_exception: 'unauthorized'}));\n            return;\n          }\n      }\n\n      resolve(authorizeData);\n    });\n  }\n}\n","import Listener from '../helpers/listener';\n\n/**\n * Class for authentication using Iframe\n */\nexport default class Iframe {\n  // eslint-disable-next-line require-jsdoc\n  constructor(sdk, options) {\n    this.options = options;\n    this.sdk = sdk;\n  }\n\n  /**\n   * run iframe authorization flow, not recommended because of ITP 2.0\n   * @return {Promise} promise that resolves to authorize data or error\n   */\n  authorize() {\n    return new Promise((resolve, reject) => {\n      const url = this.sdk.authorizeURL(this.options, 'button');\n\n      const listener = new Listener(this.options);\n\n      const cb = (err, authorizeData) => {\n        this.removeIframe();\n        if (err) {\n          return reject(err);\n        }\n        resolve(authorizeData);\n      };\n\n      listener.start(5000, cb);\n\n      const iframe = document.createElement('iframe');\n      iframe.setAttribute('src', url);\n      iframe.setAttribute('id', this.iframeID());\n      iframe.style.width = '1px';\n      iframe.style.height = '1px';\n      iframe.style.position = 'fixed';\n      iframe.style.top = '0';\n      iframe.style.right = '0';\n      iframe.style.opacity = '0';\n      iframe.style.visibility = 'none';\n\n      document.body.appendChild(iframe);\n    });\n  }\n\n  // eslint-disable-next-line require-jsdoc\n  iframeID() {\n    return this.options.client_id + this.options.response_type;\n  }\n\n  // eslint-disable-next-line require-jsdoc\n  removeIframe() {\n    const ref = document.getElementById(this.iframeID());\n    if (ref && ref.parentNode) {\n      ref.parentNode.removeChild(ref);\n    }\n  }\n}\n","/* eslint-disable require-jsdoc */\n\n/** @fileOverview\n * @author Auth0 https://github.com/auth0/auth0.js\n * @license MIT\n */\n\nfunction string(length) {\n  const bytes = new Uint8Array(length);\n  const result = [];\n  const charset =\n    '0123456789ABCDEFGHIJKLMNOPQRSTUVXYZabcdefghijklmnopqrstuvwxyz-._~';\n\n  const cryptoObj = window.crypto || window.msCrypto;\n  let random = '';\n  if (!cryptoObj) {\n    for (let i = 0; i < length; i++) {\n      random += charset.charAt(Math.floor(Math.random() * charset.length));\n    }\n  } else {\n    random = cryptoObj.getRandomValues(bytes);\n  }\n\n  for (let a = 0; a < random.length; a++) {\n    result.push(charset[random[a] % charset.length]);\n  }\n\n  return result.join('');\n}\n\nexport default {\n  string: string,\n};\n","/* eslint-disable require-jsdoc */\n\n/** @fileOverview\n * @author Auth0 https://github.com/auth0/auth0.js\n * @license MIT\n */\n\nfunction DummyStorage() {}\n\nDummyStorage.prototype.getItem = function () {\n  return null;\n};\n\nDummyStorage.prototype.removeItem = function () {};\n\nDummyStorage.prototype.setItem = function () {};\n\nexport default DummyStorage;\n","/*!\n * JavaScript Cookie v2.2.1\n * https://github.com/js-cookie/js-cookie\n *\n * Copyright 2006, 2015 Klaus Hartl & Fagner Brack\n * Released under the MIT license\n */\n;(function (factory) {\n\tvar registeredInModuleLoader;\n\tif (typeof define === 'function' && define.amd) {\n\t\tdefine(factory);\n\t\tregisteredInModuleLoader = true;\n\t}\n\tif (typeof exports === 'object') {\n\t\tmodule.exports = factory();\n\t\tregisteredInModuleLoader = true;\n\t}\n\tif (!registeredInModuleLoader) {\n\t\tvar OldCookies = window.Cookies;\n\t\tvar api = window.Cookies = factory();\n\t\tapi.noConflict = function () {\n\t\t\twindow.Cookies = OldCookies;\n\t\t\treturn api;\n\t\t};\n\t}\n}(function () {\n\tfunction extend () {\n\t\tvar i = 0;\n\t\tvar result = {};\n\t\tfor (; i < arguments.length; i++) {\n\t\t\tvar attributes = arguments[ i ];\n\t\t\tfor (var key in attributes) {\n\t\t\t\tresult[key] = attributes[key];\n\t\t\t}\n\t\t}\n\t\treturn result;\n\t}\n\n\tfunction decode (s) {\n\t\treturn s.replace(/(%[0-9A-Z]{2})+/g, decodeURIComponent);\n\t}\n\n\tfunction init (converter) {\n\t\tfunction api() {}\n\n\t\tfunction set (key, value, attributes) {\n\t\t\tif (typeof document === 'undefined') {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tattributes = extend({\n\t\t\t\tpath: '/'\n\t\t\t}, api.defaults, attributes);\n\n\t\t\tif (typeof attributes.expires === 'number') {\n\t\t\t\tattributes.expires = new Date(new Date() * 1 + attributes.expires * 864e+5);\n\t\t\t}\n\n\t\t\t// We're using \"expires\" because \"max-age\" is not supported by IE\n\t\t\tattributes.expires = attributes.expires ? attributes.expires.toUTCString() : '';\n\n\t\t\ttry {\n\t\t\t\tvar result = JSON.stringify(value);\n\t\t\t\tif (/^[\\{\\[]/.test(result)) {\n\t\t\t\t\tvalue = result;\n\t\t\t\t}\n\t\t\t} catch (e) {}\n\n\t\t\tvalue = converter.write ?\n\t\t\t\tconverter.write(value, key) :\n\t\t\t\tencodeURIComponent(String(value))\n\t\t\t\t\t.replace(/%(23|24|26|2B|3A|3C|3E|3D|2F|3F|40|5B|5D|5E|60|7B|7D|7C)/g, decodeURIComponent);\n\n\t\t\tkey = encodeURIComponent(String(key))\n\t\t\t\t.replace(/%(23|24|26|2B|5E|60|7C)/g, decodeURIComponent)\n\t\t\t\t.replace(/[\\(\\)]/g, escape);\n\n\t\t\tvar stringifiedAttributes = '';\n\t\t\tfor (var attributeName in attributes) {\n\t\t\t\tif (!attributes[attributeName]) {\n\t\t\t\t\tcontinue;\n\t\t\t\t}\n\t\t\t\tstringifiedAttributes += '; ' + attributeName;\n\t\t\t\tif (attributes[attributeName] === true) {\n\t\t\t\t\tcontinue;\n\t\t\t\t}\n\n\t\t\t\t// Considers RFC 6265 section 5.2:\n\t\t\t\t// ...\n\t\t\t\t// 3.  If the remaining unparsed-attributes contains a %x3B (\";\")\n\t\t\t\t//     character:\n\t\t\t\t// Consume the characters of the unparsed-attributes up to,\n\t\t\t\t// not including, the first %x3B (\";\") character.\n\t\t\t\t// ...\n\t\t\t\tstringifiedAttributes += '=' + attributes[attributeName].split(';')[0];\n\t\t\t}\n\n\t\t\treturn (document.cookie = key + '=' + value + stringifiedAttributes);\n\t\t}\n\n\t\tfunction get (key, json) {\n\t\t\tif (typeof document === 'undefined') {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tvar jar = {};\n\t\t\t// To prevent the for loop in the first place assign an empty array\n\t\t\t// in case there are no cookies at all.\n\t\t\tvar cookies = document.cookie ? document.cookie.split('; ') : [];\n\t\t\tvar i = 0;\n\n\t\t\tfor (; i < cookies.length; i++) {\n\t\t\t\tvar parts = cookies[i].split('=');\n\t\t\t\tvar cookie = parts.slice(1).join('=');\n\n\t\t\t\tif (!json && cookie.charAt(0) === '\"') {\n\t\t\t\t\tcookie = cookie.slice(1, -1);\n\t\t\t\t}\n\n\t\t\t\ttry {\n\t\t\t\t\tvar name = decode(parts[0]);\n\t\t\t\t\tcookie = (converter.read || converter)(cookie, name) ||\n\t\t\t\t\t\tdecode(cookie);\n\n\t\t\t\t\tif (json) {\n\t\t\t\t\t\ttry {\n\t\t\t\t\t\t\tcookie = JSON.parse(cookie);\n\t\t\t\t\t\t} catch (e) {}\n\t\t\t\t\t}\n\n\t\t\t\t\tjar[name] = cookie;\n\n\t\t\t\t\tif (key === name) {\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\t\t\t\t} catch (e) {}\n\t\t\t}\n\n\t\t\treturn key ? jar[key] : jar;\n\t\t}\n\n\t\tapi.set = set;\n\t\tapi.get = function (key) {\n\t\t\treturn get(key, false /* read as raw */);\n\t\t};\n\t\tapi.getJSON = function (key) {\n\t\t\treturn get(key, true /* read as json */);\n\t\t};\n\t\tapi.remove = function (key, attributes) {\n\t\t\tset(key, '', extend(attributes, {\n\t\t\t\texpires: -1\n\t\t\t}));\n\t\t};\n\n\t\tapi.defaults = {};\n\n\t\tapi.withConverter = init;\n\n\t\treturn api;\n\t}\n\n\treturn init(function () {});\n}));\n","/* eslint-disable require-jsdoc */\n\n/** @fileOverview\n * @author Auth0 https://github.com/auth0/auth0.js\n * @license MIT\n */\n\nimport Cookie from 'js-cookie';\nfunction CookieStorage() {}\n\nCookieStorage.prototype.getItem = function (key) {\n  return Cookie.get(key);\n};\n\nCookieStorage.prototype.removeItem = function (key) {\n  Cookie.remove(key);\n};\n\nCookieStorage.prototype.setItem = function (key, value, options) {\n  const params = Object.assign(\n    {\n      expires: 1, // 1 day\n    },\n    options\n  );\n  Cookie.set(key, value, params);\n};\n\nexport default CookieStorage;\n","/* eslint-disable require-jsdoc */\n\n/** @fileOverview\n * @author Auth0 https://github.com/auth0/auth0.js\n * @license MIT\n */\n\nimport DummyStorage from './dummy';\nimport CookieStorage from './cookie';\n\nfunction StorageHandler(options) {\n  this.storage = new CookieStorage();\n  if (options.force_local_storage !== true) {\n    return;\n  }\n  try {\n    // some browsers throw an error when trying to access localStorage\n    // when localStorage is disabled.\n    const localStorage = window.localStorage;\n    if (localStorage) {\n      this.storage = localStorage;\n    }\n  } catch (e) {\n    console.warn(e);\n    console.warn('Cant use localStorage. Using CookieStorage instead.');\n  }\n}\n\nStorageHandler.prototype.failover = function () {\n  if (this.storage instanceof DummyStorage) {\n    console.warn('DummyStorage: ignore failover');\n    return;\n  } else if (this.storage instanceof CookieStorage) {\n    console.warn('CookieStorage: failing over DummyStorage');\n    this.storage = new DummyStorage();\n  } else {\n    console.warn('LocalStorage: failing over CookieStorage');\n    this.storage = new CookieStorage();\n  }\n};\n\nStorageHandler.prototype.getItem = function (key) {\n  try {\n    return this.storage.getItem(key);\n  } catch (e) {\n    console.warn(e);\n    this.failover();\n    return this.getItem(key);\n  }\n};\n\nStorageHandler.prototype.removeItem = function (key) {\n  try {\n    return this.storage.removeItem(key);\n  } catch (e) {\n    console.warn(e);\n    this.failover();\n    return this.removeItem(key);\n  }\n};\n\nStorageHandler.prototype.setItem = function (key, value, options) {\n  try {\n    return this.storage.setItem(key, value, options);\n  } catch (e) {\n    console.warn(e);\n    this.failover();\n    return this.setItem(key, value, options);\n  }\n};\n\nexport default StorageHandler;\n","/* eslint-disable require-jsdoc */\n\n/** @fileOverview\n * @author Auth0 https://github.com/auth0/auth0.js\n * @license MIT\n */\n\nimport StorageHandler from './storage/handler';\n\nfunction Storage(options) {\n  this.handler = new StorageHandler(options);\n}\n\nStorage.prototype.getItem = function (key) {\n  const value = this.handler.getItem(key);\n  try {\n    return JSON.parse(value);\n  } catch (_) {\n    return value;\n  }\n};\n\nStorage.prototype.removeItem = function (key) {\n  return this.handler.removeItem(key);\n};\n\nStorage.prototype.setItem = function (key, value, options) {\n  const json = JSON.stringify(value);\n  return this.handler.setItem(key, json, options);\n};\n\nexport default Storage;\n","/* eslint-disable require-jsdoc */\n/* internal file */\nimport random from '../helpers/random';\nimport Storage from '../helpers/storage';\n\nexport default class Transaction {\n  constructor(options) {\n    this.options = options.transaction;\n    this.storage = new Storage(this.options);\n  }\n\n  generate(params) {\n    if (!params.state) {\n      params.state = random.string(this.options.key_length);\n    }\n\n    // 30 minutes\n    this.storage.setItem(\n      this.options.namespace + params.state,\n      {state: params.state, code_verifier: params.code_verifier},\n      {expires: 1 / 48}\n    );\n  }\n\n  get(state) {\n    const transactionData = this.storage.getItem(\n      this.options.namespace + state\n    );\n    this.clear(state);\n    return transactionData || {};\n  }\n\n  clear(state) {\n    this.storage.removeItem(this.options.namespace + state);\n  }\n}\n","/** @fileOverview Javascript cryptography implementation.\n *\n * Crush to remove comments, shorten variable names and\n * generally reduce transmission size.\n *\n * @author Emily Stark\n * @author Mike Hamburg\n * @author Dan Boneh\n */\n\n'use strict';\n/*jslint indent: 2, bitwise: false, nomen: false, plusplus: false, white: false, regexp: false */\n/*global document, window, escape, unescape, module, require, Uint32Array */\n\n/**\n * The Stanford Javascript Crypto Library, top-level namespace.\n * @namespace\n */\nvar sjcl = {\n  /**\n   * Symmetric ciphers.\n   * @namespace\n   */\n  cipher: {},\n\n  /**\n   * Hash functions.  Right now only SHA256 is implemented.\n   * @namespace\n   */\n  hash: {},\n\n  /**\n   * Key exchange functions.  Right now only SRP is implemented.\n   * @namespace\n   */\n  keyexchange: {},\n\n  /**\n   * Cipher modes of operation.\n   * @namespace\n   */\n  mode: {},\n\n  /**\n   * Miscellaneous.  HMAC and PBKDF2.\n   * @namespace\n   */\n  misc: {},\n\n  /**\n   * Bit array encoders and decoders.\n   * @namespace\n   *\n   * @description\n   * The members of this namespace are functions which translate between\n   * SJCL's bitArrays and other objects (usually strings).  Because it\n   * isn't always clear which direction is encoding and which is decoding,\n   * the method names are \"fromBits\" and \"toBits\".\n   */\n  codec: {},\n\n  /**\n   * Exceptions.\n   * @namespace\n   */\n  exception: {\n    /**\n     * Ciphertext is corrupt.\n     * @constructor\n     */\n    corrupt: function (message) {\n      this.toString = function () {\n        return 'CORRUPT: ' + this.message;\n      };\n      this.message = message;\n    },\n\n    /**\n     * Invalid parameter.\n     * @constructor\n     */\n    invalid: function (message) {\n      this.toString = function () {\n        return 'INVALID: ' + this.message;\n      };\n      this.message = message;\n    },\n\n    /**\n     * Bug or missing feature in SJCL.\n     * @constructor\n     */\n    bug: function (message) {\n      this.toString = function () {\n        return 'BUG: ' + this.message;\n      };\n      this.message = message;\n    },\n\n    /**\n     * Something isn't ready.\n     * @constructor\n     */\n    notReady: function (message) {\n      this.toString = function () {\n        return 'NOT READY: ' + this.message;\n      };\n      this.message = message;\n    },\n  },\n};\n/** @fileOverview Arrays of bits, encoded as arrays of Numbers.\n *\n * @author Emily Stark\n * @author Mike Hamburg\n * @author Dan Boneh\n */\n\n/**\n * Arrays of bits, encoded as arrays of Numbers.\n * @namespace\n * @description\n * <p>\n * These objects are the currency accepted by SJCL's crypto functions.\n * </p>\n *\n * <p>\n * Most of our crypto primitives operate on arrays of 4-byte words internally,\n * but many of them can take arguments that are not a multiple of 4 bytes.\n * This library encodes arrays of bits (whose size need not be a multiple of 8\n * bits) as arrays of 32-bit words.  The bits are packed, big-endian, into an\n * array of words, 32 bits at a time.  Since the words are double-precision\n * floating point numbers, they fit some extra data.  We use this (in a private,\n * possibly-changing manner) to encode the number of bits actually  present\n * in the last word of the array.\n * </p>\n *\n * <p>\n * Because bitwise ops clear this out-of-band data, these arrays can be passed\n * to ciphers like AES which want arrays of words.\n * </p>\n */\nsjcl.bitArray = {\n  /**\n   * Array slices in units of bits.\n   * @param {bitArray} a The array to slice.\n   * @param {Number} bstart The offset to the start of the slice, in bits.\n   * @param {Number} bend The offset to the end of the slice, in bits.  If this is undefined,\n   * slice until the end of the array.\n   * @return {bitArray} The requested slice.\n   */\n  bitSlice: function (a, bstart, bend) {\n    a = sjcl.bitArray\n      ._shiftRight(a.slice(bstart / 32), 32 - (bstart & 31))\n      .slice(1);\n    return bend === undefined ? a : sjcl.bitArray.clamp(a, bend - bstart);\n  },\n\n  /**\n   * Extract a number packed into a bit array.\n   * @param {bitArray} a The array to slice.\n   * @param {Number} bstart The offset to the start of the slice, in bits.\n   * @param {Number} blength The length of the number to extract.\n   * @return {Number} The requested slice.\n   */\n  extract: function (a, bstart, blength) {\n    // FIXME: this Math.floor is not necessary at all, but for some reason\n    // seems to suppress a bug in the Chromium JIT.\n    var x,\n      sh = Math.floor((-bstart - blength) & 31);\n    if (((bstart + blength - 1) ^ bstart) & -32) {\n      // it crosses a boundary\n      x =\n        (a[(bstart / 32) | 0] << (32 - sh)) ^ (a[(bstart / 32 + 1) | 0] >>> sh);\n    } else {\n      // within a single word\n      x = a[(bstart / 32) | 0] >>> sh;\n    }\n    return x & ((1 << blength) - 1);\n  },\n\n  /**\n   * Concatenate two bit arrays.\n   * @param {bitArray} a1 The first array.\n   * @param {bitArray} a2 The second array.\n   * @return {bitArray} The concatenation of a1 and a2.\n   */\n  concat: function (a1, a2) {\n    if (a1.length === 0 || a2.length === 0) {\n      return a1.concat(a2);\n    }\n\n    var last = a1[a1.length - 1],\n      shift = sjcl.bitArray.getPartial(last);\n    if (shift === 32) {\n      return a1.concat(a2);\n    } else {\n      return sjcl.bitArray._shiftRight(\n        a2,\n        shift,\n        last | 0,\n        a1.slice(0, a1.length - 1)\n      );\n    }\n  },\n\n  /**\n   * Find the length of an array of bits.\n   * @param {bitArray} a The array.\n   * @return {Number} The length of a, in bits.\n   */\n  bitLength: function (a) {\n    var l = a.length,\n      x;\n    if (l === 0) {\n      return 0;\n    }\n    x = a[l - 1];\n    return (l - 1) * 32 + sjcl.bitArray.getPartial(x);\n  },\n\n  /**\n   * Truncate an array.\n   * @param {bitArray} a The array.\n   * @param {Number} len The length to truncate to, in bits.\n   * @return {bitArray} A new array, truncated to len bits.\n   */\n  clamp: function (a, len) {\n    if (a.length * 32 < len) {\n      return a;\n    }\n    a = a.slice(0, Math.ceil(len / 32));\n    var l = a.length;\n    len = len & 31;\n    if (l > 0 && len) {\n      a[l - 1] = sjcl.bitArray.partial(\n        len,\n        a[l - 1] & (0x80000000 >> (len - 1)),\n        1\n      );\n    }\n    return a;\n  },\n\n  /**\n   * Make a partial word for a bit array.\n   * @param {Number} len The number of bits in the word.\n   * @param {Number} x The bits.\n   * @param {Number} [_end=0] Pass 1 if x has already been shifted to the high side.\n   * @return {Number} The partial word.\n   */\n  partial: function (len, x, _end) {\n    if (len === 32) {\n      return x;\n    }\n    return (_end ? x | 0 : x << (32 - len)) + len * 0x10000000000;\n  },\n\n  /**\n   * Get the number of bits used by a partial word.\n   * @param {Number} x The partial word.\n   * @return {Number} The number of bits used by the partial word.\n   */\n  getPartial: function (x) {\n    return Math.round(x / 0x10000000000) || 32;\n  },\n\n  /**\n   * Compare two arrays for equality in a predictable amount of time.\n   * @param {bitArray} a The first array.\n   * @param {bitArray} b The second array.\n   * @return {boolean} true if a == b; false otherwise.\n   */\n  equal: function (a, b) {\n    if (sjcl.bitArray.bitLength(a) !== sjcl.bitArray.bitLength(b)) {\n      return false;\n    }\n    var x = 0,\n      i;\n    for (i = 0; i < a.length; i++) {\n      x |= a[i] ^ b[i];\n    }\n    return x === 0;\n  },\n\n  /** Shift an array right.\n   * @param {bitArray} a The array to shift.\n   * @param {Number} shift The number of bits to shift.\n   * @param {Number} [carry=0] A byte to carry in\n   * @param {bitArray} [out=[]] An array to prepend to the output.\n   * @private\n   */\n  _shiftRight: function (a, shift, carry, out) {\n    var i,\n      last2 = 0,\n      shift2;\n    if (out === undefined) {\n      out = [];\n    }\n\n    for (; shift >= 32; shift -= 32) {\n      out.push(carry);\n      carry = 0;\n    }\n    if (shift === 0) {\n      return out.concat(a);\n    }\n\n    for (i = 0; i < a.length; i++) {\n      out.push(carry | (a[i] >>> shift));\n      carry = a[i] << (32 - shift);\n    }\n    last2 = a.length ? a[a.length - 1] : 0;\n    shift2 = sjcl.bitArray.getPartial(last2);\n    out.push(\n      sjcl.bitArray.partial(\n        (shift + shift2) & 31,\n        shift + shift2 > 32 ? carry : out.pop(),\n        1\n      )\n    );\n    return out;\n  },\n\n  /** xor a block of 4 words together.\n   * @private\n   */\n  _xor4: function (x, y) {\n    return [x[0] ^ y[0], x[1] ^ y[1], x[2] ^ y[2], x[3] ^ y[3]];\n  },\n\n  /** byteswap a word array inplace.\n   * (does not handle partial words)\n   * @param {sjcl.bitArray} a word array\n   * @return {sjcl.bitArray} byteswapped array\n   */\n  byteswapM: function (a) {\n    var i,\n      v,\n      m = 0xff00;\n    for (i = 0; i < a.length; ++i) {\n      v = a[i];\n      a[i] = (v >>> 24) | ((v >>> 8) & m) | ((v & m) << 8) | (v << 24);\n    }\n    return a;\n  },\n};\n/** @fileOverview Bit array codec implementations.\n *\n * @author Emily Stark\n * @author Mike Hamburg\n * @author Dan Boneh\n */\n\n/**\n * UTF-8 strings\n * @namespace\n */\nsjcl.codec.utf8String = {\n  /** Convert from a bitArray to a UTF-8 string. */\n  fromBits: function (arr) {\n    var out = '',\n      bl = sjcl.bitArray.bitLength(arr),\n      i,\n      tmp;\n    for (i = 0; i < bl / 8; i++) {\n      if ((i & 3) === 0) {\n        tmp = arr[i / 4];\n      }\n      out += String.fromCharCode(((tmp >>> 8) >>> 8) >>> 8);\n      tmp <<= 8;\n    }\n    return decodeURIComponent(escape(out));\n  },\n\n  /** Convert from a UTF-8 string to a bitArray. */\n  toBits: function (str) {\n    str = unescape(encodeURIComponent(str));\n    var out = [],\n      i,\n      tmp = 0;\n    for (i = 0; i < str.length; i++) {\n      tmp = (tmp << 8) | str.charCodeAt(i);\n      if ((i & 3) === 3) {\n        out.push(tmp);\n        tmp = 0;\n      }\n    }\n    if (i & 3) {\n      out.push(sjcl.bitArray.partial(8 * (i & 3), tmp));\n    }\n    return out;\n  },\n};\n/** @fileOverview Javascript SHA-256 implementation.\n *\n * An older version of this implementation is available in the public\n * domain, but this one is (c) Emily Stark, Mike Hamburg, Dan Boneh,\n * Stanford University 2008-2010 and BSD-licensed for liability\n * reasons.\n *\n * Special thanks to Aldo Cortesi for pointing out several bugs in\n * this code.\n *\n * @author Emily Stark\n * @author Mike Hamburg\n * @author Dan Boneh\n */\n\n/**\n * Context for a SHA-256 operation in progress.\n * @constructor\n */\nsjcl.hash.sha256 = function (hash) {\n  if (!this._key[0]) {\n    this._precompute();\n  }\n  if (hash) {\n    this._h = hash._h.slice(0);\n    this._buffer = hash._buffer.slice(0);\n    this._length = hash._length;\n  } else {\n    this.reset();\n  }\n};\n\n/**\n * Hash a string or an array of words.\n * @static\n * @param {bitArray|String} data the data to hash.\n * @return {bitArray} The hash value, an array of 16 big-endian words.\n */\nsjcl.hash.sha256.hash = function (data) {\n  return new sjcl.hash.sha256().update(data).finalize();\n};\n\nsjcl.hash.sha256.prototype = {\n  /**\n   * The hash's block size, in bits.\n   * @constant\n   */\n  blockSize: 512,\n\n  /**\n   * Reset the hash state.\n   * @return this\n   */\n  reset: function () {\n    this._h = this._init.slice(0);\n    this._buffer = [];\n    this._length = 0;\n    return this;\n  },\n\n  /**\n   * Input several words to the hash.\n   * @param {bitArray|String} data the data to hash.\n   * @return this\n   */\n  update: function (data) {\n    if (typeof data === 'string') {\n      data = sjcl.codec.utf8String.toBits(data);\n    }\n    var i,\n      b = (this._buffer = sjcl.bitArray.concat(this._buffer, data)),\n      ol = this._length,\n      nl = (this._length = ol + sjcl.bitArray.bitLength(data));\n    if (nl > 9007199254740991) {\n      throw new sjcl.exception.invalid('Cannot hash more than 2^53 - 1 bits');\n    }\n\n    if (typeof Uint32Array !== 'undefined') {\n      var c = new Uint32Array(b);\n      var j = 0;\n      for (i = 512 + ol - ((512 + ol) & 511); i <= nl; i += 512) {\n        this._block(c.subarray(16 * j, 16 * (j + 1)));\n        j += 1;\n      }\n      b.splice(0, 16 * j);\n    } else {\n      for (i = 512 + ol - ((512 + ol) & 511); i <= nl; i += 512) {\n        this._block(b.splice(0, 16));\n      }\n    }\n    return this;\n  },\n\n  /**\n   * Complete hashing and output the hash value.\n   * @return {bitArray} The hash value, an array of 8 big-endian words.\n   */\n  finalize: function () {\n    var i,\n      b = this._buffer,\n      h = this._h;\n\n    // Round out and push the buffer\n    b = sjcl.bitArray.concat(b, [sjcl.bitArray.partial(1, 1)]);\n\n    // Round out the buffer to a multiple of 16 words, less the 2 length words.\n    for (i = b.length + 2; i & 15; i++) {\n      b.push(0);\n    }\n\n    // append the length\n    b.push(Math.floor(this._length / 0x100000000));\n    b.push(this._length | 0);\n\n    while (b.length) {\n      this._block(b.splice(0, 16));\n    }\n\n    this.reset();\n    return h;\n  },\n\n  /**\n   * The SHA-256 initialization vector, to be precomputed.\n   * @private\n   */\n  _init: [],\n  /*\n   _init:[0x6a09e667,0xbb67ae85,0x3c6ef372,0xa54ff53a,0x510e527f,0x9b05688c,0x1f83d9ab,0x5be0cd19],\n   */\n\n  /**\n   * The SHA-256 hash key, to be precomputed.\n   * @private\n   */\n  _key: [],\n  /*\n   _key:\n     [0x428a2f98, 0x71374491, 0xb5c0fbcf, 0xe9b5dba5, 0x3956c25b, 0x59f111f1, 0x923f82a4, 0xab1c5ed5,\n      0xd807aa98, 0x12835b01, 0x243185be, 0x550c7dc3, 0x72be5d74, 0x80deb1fe, 0x9bdc06a7, 0xc19bf174,\n      0xe49b69c1, 0xefbe4786, 0x0fc19dc6, 0x240ca1cc, 0x2de92c6f, 0x4a7484aa, 0x5cb0a9dc, 0x76f988da,\n      0x983e5152, 0xa831c66d, 0xb00327c8, 0xbf597fc7, 0xc6e00bf3, 0xd5a79147, 0x06ca6351, 0x14292967,\n      0x27b70a85, 0x2e1b2138, 0x4d2c6dfc, 0x53380d13, 0x650a7354, 0x766a0abb, 0x81c2c92e, 0x92722c85,\n      0xa2bfe8a1, 0xa81a664b, 0xc24b8b70, 0xc76c51a3, 0xd192e819, 0xd6990624, 0xf40e3585, 0x106aa070,\n      0x19a4c116, 0x1e376c08, 0x2748774c, 0x34b0bcb5, 0x391c0cb3, 0x4ed8aa4a, 0x5b9cca4f, 0x682e6ff3,\n      0x748f82ee, 0x78a5636f, 0x84c87814, 0x8cc70208, 0x90befffa, 0xa4506ceb, 0xbef9a3f7, 0xc67178f2],\n   */\n\n  /**\n   * Function to precompute _init and _key.\n   * @private\n   */\n  _precompute: function () {\n    var i = 0,\n      prime = 2,\n      factor,\n      isPrime;\n\n    function frac(x) {\n      return ((x - Math.floor(x)) * 0x100000000) | 0;\n    }\n\n    for (; i < 64; prime++) {\n      isPrime = true;\n      for (factor = 2; factor * factor <= prime; factor++) {\n        if (prime % factor === 0) {\n          isPrime = false;\n          break;\n        }\n      }\n      if (isPrime) {\n        if (i < 8) {\n          this._init[i] = frac(Math.pow(prime, 1 / 2));\n        }\n        this._key[i] = frac(Math.pow(prime, 1 / 3));\n        i++;\n      }\n    }\n  },\n\n  /**\n   * Perform one cycle of SHA-256.\n   * @param {Uint32Array|bitArray} w one block of words.\n   * @private\n   */\n  _block: function (w) {\n    var i,\n      tmp,\n      a,\n      b,\n      h = this._h,\n      k = this._key,\n      h0 = h[0],\n      h1 = h[1],\n      h2 = h[2],\n      h3 = h[3],\n      h4 = h[4],\n      h5 = h[5],\n      h6 = h[6],\n      h7 = h[7];\n\n    /* Rationale for placement of |0 :\n     * If a value can overflow is original 32 bits by a factor of more than a few\n     * million (2^23 ish), there is a possibility that it might overflow the\n     * 53-bit mantissa and lose precision.\n     *\n     * To avoid this, we clamp back to 32 bits by |'ing with 0 on any value that\n     * propagates around the loop, and on the hash state h[].  I don't believe\n     * that the clamps on h4 and on h0 are strictly necessary, but it's close\n     * (for h4 anyway), and better safe than sorry.\n     *\n     * The clamps on h[] are necessary for the output to be correct even in the\n     * common case and for short inputs.\n     */\n    for (i = 0; i < 64; i++) {\n      // load up the input word for this round\n      if (i < 16) {\n        tmp = w[i];\n      } else {\n        a = w[(i + 1) & 15];\n        b = w[(i + 14) & 15];\n        tmp = w[i & 15] =\n          (((a >>> 7) ^ (a >>> 18) ^ (a >>> 3) ^ (a << 25) ^ (a << 14)) +\n            ((b >>> 17) ^ (b >>> 19) ^ (b >>> 10) ^ (b << 15) ^ (b << 13)) +\n            w[i & 15] +\n            w[(i + 9) & 15]) |\n          0;\n      }\n\n      tmp =\n        tmp +\n        h7 +\n        ((h4 >>> 6) ^\n          (h4 >>> 11) ^\n          (h4 >>> 25) ^\n          (h4 << 26) ^\n          (h4 << 21) ^\n          (h4 << 7)) +\n        (h6 ^ (h4 & (h5 ^ h6))) +\n        k[i]; // | 0;\n\n      // shift register\n      h7 = h6;\n      h6 = h5;\n      h5 = h4;\n      h4 = (h3 + tmp) | 0;\n      h3 = h2;\n      h2 = h1;\n      h1 = h0;\n\n      h0 =\n        (tmp +\n          ((h1 & h2) ^ (h3 & (h1 ^ h2))) +\n          ((h1 >>> 2) ^\n            (h1 >>> 13) ^\n            (h1 >>> 22) ^\n            (h1 << 30) ^\n            (h1 << 19) ^\n            (h1 << 10))) |\n        0;\n    }\n\n    h[0] = (h[0] + h0) | 0;\n    h[1] = (h[1] + h1) | 0;\n    h[2] = (h[2] + h2) | 0;\n    h[3] = (h[3] + h3) | 0;\n    h[4] = (h[4] + h4) | 0;\n    h[5] = (h[5] + h5) | 0;\n    h[6] = (h[6] + h6) | 0;\n    h[7] = (h[7] + h7) | 0;\n  },\n};\n\nexport default sjcl;\n","// eslint-disable-next-line require-jsdoc\nfunction base64URLEncode(str) {\n  return btoa(str).replace(/\\+/g, '-').replace(/\\//g, '_').replace(/=+$/, '');\n}\n\nexport default {\n  base64URLEncode: base64URLEncode,\n};\n","import Popup from './authentication/popup';\nimport Redirect from './authentication/redirect';\nimport Iframe from './authentication/iframe';\nimport Transaction from './authentication/transaction';\nimport qs from 'qs';\nimport sjcl from './vendor/sjcl';\nimport {pick} from './helpers/object';\nimport encoding from './helpers/encoding';\n\nimport random from './helpers/random';\n/**\n * Accounts SDK main class\n */\nexport default class AccountsSDK {\n  /**\n   * Accounts SDK constructor\n   *\n   * @constructor\n   * @param {Object} options\n   * @param {String} options.client_id registered client ID\n   * @param {String} [options.prompt=''] use `consent` to force consent prompt in popup and redirect flows\n   * @param {String} [options.response_type='token'] OAuth response type, use `token` or `code`\n   * @param {String} [options.popup_flow='auto'] `auto` - close popup when not required, `manual` - always show popup\n   * @param {String} [options.state=''] OAuth state param\n   * @param {Boolean} [options.verify_state=true] check if state matches after redirect\n   * @param {String} [options.scope=null] request exact scopes - must be configured for a given client id\n   * @param {String} [options.redirect_uri=''] OAuth redirect uri - default current location\n   * @param {String} [options.email_hint=''] fill in email in forms\n   * @param {String} [options.server_url='https://accounts.livechat.com'] authorization server url\n   * @param {String} [options.path=''] option to provide a path when loading accounts, for example '/signup'\n   * @param {Object} [options.tracking] tracking querystring params\n   * @param {Object} [options.transaction] options for transaction manager\n   * @param {String} [options.transaction.namespace='com.livechat.accounts'] transaction keys prefix\n   * @param {Number} [options.transaction.key_length=32] transaction random state length\n   * @param {Boolean} [options.transaction.force_local_storage=false] try to use local storage instead of cookies\n   * @param {Object} [options.pkce] PKCE configuration\n   * @param {Boolean} [options.pkce.enabled=true] Oauth 2.1 PKCE extension enabled\n   * @param {String} [options.pkce.code_verifier] override auto generated code verifier\n   * @param {Number} [options.pkce.code_verifier_length=128] code verifier length, between 43 and 128 characters https://tools.ietf.org/html/rfc7636#section-4.1\n   * @param {String} [options.pkce.code_challange_method='S256'] code challange method, use `S256` or `plain`\n   */\n  constructor(options = {}) {\n    if (options.client_id == null) {\n      throw new Error('client id not provided');\n    }\n\n    const defaultOptions = {\n      prompt: '',\n      response_type: 'token',\n      popup_flow: 'auto',\n      state: '',\n      verify_state: true,\n      verify_callback: true,\n      scope: null,\n      redirect_uri: '',\n      email_hint: null,\n      server_url: 'https://accounts.livechat.com',\n      tracking: {\n        utm_source: 'accounts.livechat.com',\n        utm_medium: 'accounts-sdk',\n      },\n      transaction: {\n        namespace: 'com.livechat.accounts',\n        key_length: 32,\n        force_local_storage: false,\n      },\n      pkce: {\n        enabled: true,\n        code_verifier_length: 128,\n        code_challange_method: 'S256',\n      },\n    };\n\n    this.options = Object.assign({}, defaultOptions, options);\n    this.transaction = new Transaction(this.options);\n  }\n\n  /**\n   * use iframe for authorization\n   * @param {Object} options for overriding defaults\n   * @return {Object} instance of an iframe flow\n   */\n  iframe(options = {}) {\n    const localOptions = Object.assign({}, this.options, options);\n    return new Iframe(this, localOptions);\n  }\n\n  /**\n   * use popup for authorization\n   * @param {Object} options for overriding defaults\n   * @return {Object} instance of a popup flow\n   */\n  popup(options = {}) {\n    const localOptions = Object.assign({}, this.options, options);\n    return new Popup(this, localOptions);\n  }\n\n  /**\n   * use redirect for authorization\n   * @param {Object} options for overriding defaults\n   * @return {Object} instance of a redirect flow\n   */\n  redirect(options = {}) {\n    const localOptions = Object.assign({}, this.options, options);\n    return new Redirect(this, localOptions);\n  }\n\n  /**\n   * create authorization url\n   * @param {Object} options for overriding defaults\n   * @param {String} flow set 'button' for popup and iframe\n   * @return {string} generated url\n   */\n  authorizeURL(options = {}, flow = '') {\n    const localOptions = Object.assign({}, this.options, options);\n\n    if (!localOptions.redirect_uri) {\n      localOptions.redirect_uri =\n        window.location.origin + window.location.pathname;\n    }\n\n    const params = pick(localOptions, [\n      'client_id',\n      'redirect_uri',\n      'state',\n      'response_type',\n      'scope',\n      'prompt',\n    ]);\n\n    Object.assign(params, localOptions.tracking);\n\n    if (params.scope === null) {\n      delete params.scope;\n    }\n\n    if (flow != null) {\n      params.flow = flow;\n    }\n\n    if (localOptions.email_hint) {\n      params.email = localOptions.email_hint;\n    }\n\n    let url = localOptions.server_url;\n    if (localOptions.popup_flow === 'manual') {\n      url += '/signin';\n    }\n\n    if (localOptions.path) {\n      url += localOptions.path;\n    }\n\n    if (localOptions.response_type === 'code' && localOptions.pkce.enabled) {\n      const codeVerifier =\n        localOptions.pkce.code_verifier ||\n        random.string(localOptions.pkce.code_verifier_length);\n\n      switch (localOptions.pkce.code_challange_method) {\n        case 'S256':\n          const codeChallenge = sjcl.hash.sha256.hash(codeVerifier);\n          Object.assign(params, {\n            code_verifier: codeVerifier,\n            code_challenge: encoding.base64URLEncode(codeChallenge),\n            code_challenge_method: localOptions.pkce.code_challange_method,\n          });\n          break;\n\n        default:\n          Object.assign(params, {\n            code_verifier: codeVerifier,\n            code_challenge: codeVerifier,\n            code_challenge_method: localOptions.pkce.code_challange_method,\n          });\n      }\n    }\n\n    this.transaction.generate(params);\n    delete params.code_verifier;\n    return url + '?' + qs.stringify(params);\n  }\n\n  /**\n   * This function verifies if redirect transaction params are valid.\n   * @param {Object} authorizeData authorize data to validate and return transaction state - redirect state, pkce code verifier\n   * @return {Object} transaction state if valid, null otherwise\n   */\n  verify(authorizeData) {\n    const transactionData = this.transaction.get(authorizeData.state);\n\n    if (authorizeData.state && this.options.verify_state) {\n      if (transactionData.state != authorizeData.state) {\n        return null;\n      }\n    }\n\n    return transactionData;\n  }\n}\n"],"names":["extend","error","oauth_exception","this","Object","assign","description","identity_exception","invalid_request","unauthorized_client","access_denied","unsupported_response_type","unauthorized","Listener","options","listening","receiveMessage","bind","timeout","callback","_listenerInited","tid","setTimeout","_this","stop","window","addEventListener","clearTimeout","removeEventListener","event","origin","server_url","replace","data","errors","scopes","scope","expires_in","parseInt","Popup","sdk","Promise","resolve","reject","url","authorizeURL","left","screen","width","w","top","height","h","start","err","authorizeData","open","document","requestStorageAccess","then","has","prototype","hasOwnProperty","isArray","Array","hexTable","array","i","push","toString","toUpperCase","arrayToObject","source","obj","plainObjects","create","length","target","keys","reduce","acc","key","combine","a","b","concat","compact","value","queue","o","prop","refs","item","j","val","_typeof","indexOf","pop","compacted","compactQueue","decode","str","decoder","charset","strWithoutPlus","unescape","decodeURIComponent","e","encode","defaultEncoder","string","Symbol","call","String","escape","$0","slice","out","c","charCodeAt","charAt","isBuffer","constructor","isRegExp","maybeMap","fn","mapped","merge","allowPrototypes","mergeTarget","forEach","targetItem","percentTwenties","Format","RFC1738","RFC3986","util","formatters","arrayPrefixGenerators","brackets","prefix","comma","indices","repeat","pushToArray","arr","valueOrArray","apply","toISO","Date","toISOString","defaultFormat","formats","defaults","addQueryPrefix","allowDots","charsetSentinel","delimiter","encoder","utils","encodeValuesOnly","format","formatter","serializeDate","date","skipNulls","strictNullHandling","stringify","object","generateArrayPrefix","filter","sort","v","join","objKeys","values","keyPrefix","arrayLimit","depth","ignoreQueryPrefix","interpretNumericEntities","parameterLimit","parseArrays","numberStr","fromCharCode","parseArrayValue","split","parseKeys","givenKey","valuesParsed","child","segment","exec","parent","index","chain","leaf","root","cleanRoot","isNaN","parseObject","opts","undefined","TypeError","normalizeParseOptions","tempObj","cleanStr","limit","Infinity","parts","skipIndex","part","bracketEqualsPos","pos","encodedVal","parseValues","newObj","normalizeStringifyOptions","arrayFormat","joined","pick","prev","Redirect","location","requiredFields","response_type","qs","hash","substring","every","field","search","Iframe","removeIframe","iframe","createElement","setAttribute","iframeID","style","position","right","opacity","visibility","body","appendChild","client_id","ref","getElementById","parentNode","removeChild","bytes","Uint8Array","result","cryptoObj","crypto","msCrypto","random","getRandomValues","Math","floor","DummyStorage","getItem","removeItem","setItem","factory","arguments","attributes","s","init","converter","api","set","path","expires","toUTCString","JSON","test","write","encodeURIComponent","stringifiedAttributes","attributeName","cookie","get","json","jar","cookies","name","read","parse","getJSON","remove","withConverter","module","CookieStorage","StorageHandler","storage","force_local_storage","localStorage","console","warn","Storage","handler","Cookie","params","failover","_","Transaction","transaction","state","key_length","namespace","code_verifier","transactionData","clear","sjcl","cipher","keyexchange","mode","misc","codec","exception","corrupt","message","invalid","bug","notReady","bitArray","bitSlice","bstart","bend","_shiftRight","clamp","extract","blength","sh","a1","a2","last","shift","getPartial","bitLength","x","l","len","ceil","partial","_end","round","equal","carry","last2","shift2","_xor4","y","byteswapM","utf8String","fromBits","tmp","bl","toBits","sha256","_key","_precompute","_h","_buffer","_length","reset","update","finalize","blockSize","_init","ol","nl","Uint32Array","_block","subarray","splice","factor","isPrime","prime","frac","pow","k","h0","h1","h2","h3","h4","h5","h6","h7","base64URLEncode","btoa","Error","defaultOptions","prompt","popup_flow","verify_state","verify_callback","redirect_uri","email_hint","tracking","utm_source","utm_medium","pkce","enabled","code_verifier_length","code_challange_method","localOptions","flow","pathname","email","codeVerifier","codeChallenge","code_challenge","encoding","code_challenge_method","generate"],"mappings":"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"}