{"version":3,"file":"accounts-sdk.js","sources":["../src/helpers/errors.js","../src/helpers/listener.js","../src/authentication/popup.js","../node_modules/qs/lib/utils.js","../node_modules/qs/lib/formats.js","../node_modules/qs/lib/stringify.js","../node_modules/qs/lib/parse.js","../node_modules/qs/lib/index.js","../src/helpers/object.js","../src/authentication/redirect.js","../src/authentication/iframe.js","../src/helpers/random.js","../src/helpers/storage/dummy.js","../node_modules/js-cookie/src/js.cookie.js","../src/helpers/storage/cookie.js","../src/helpers/storage/handler.js","../src/helpers/storage.js","../src/authentication/transaction.js","../src/vendor/sjcl.js","../src/helpers/encoding.js","../src/sdk.js"],"sourcesContent":["export default {\n  extend: function (error) {\n    if (error.oauth_exception && this.oauth_exception[error.oauth_exception]) {\n      return Object.assign(error, {\n        description: this.oauth_exception[error.oauth_exception],\n      });\n    }\n\n    if (\n      error.identity_exception &&\n      this.identity_exception[error.identity_exception]\n    ) {\n      return Object.assign(error, {\n        description: this.identity_exception[error.identity_exception],\n      });\n    }\n\n    return error;\n  },\n  oauth_exception: {\n    invalid_request:\n      'You may be loading accounts-sdk on a domain that is not whitelisted.',\n\n    unauthorized_client:\n      'Client not found, not provided or incorectly configured.',\n\n    access_denied:\n      'Probably this application is installed on a different account and you do not have access to it.',\n\n    unsupported_response_type:\n      'Provided response type is incorrect or unavailable for a given client.',\n  },\n  identity_exception: {\n    unauthorized: 'Resource owner identity is not known or consent is missing.',\n  },\n};\n","/* eslint-disable require-jsdoc */\nimport './errors';\nimport errors from './errors';\nexport default class Listener {\n  constructor(options = {}) {\n    this.options = options;\n    this.listening = false;\n\n    this.receiveMessage = this.receiveMessage.bind(this);\n  }\n\n  start(timeout, callback) {\n    if (this._listenerInited) {\n      return;\n    }\n    this.listening = true;\n    this.callback = callback;\n\n    if (timeout) {\n      this.tid = setTimeout(() => {\n        this.stop();\n        callback('timeout', null);\n      }, timeout);\n    }\n\n    window.addEventListener('message', this.receiveMessage);\n  }\n\n  stop() {\n    this.listening = false;\n    clearTimeout(this.tid);\n    window.removeEventListener('message', this.receiveMessage, false);\n  }\n\n  receiveMessage(event) {\n    if (\n      event.origin !== this.options.server_url &&\n      event.origin !==\n        this.options.server_url.replace(/livechat\\.com$/, 'livechatinc.com')\n    ) {\n      return;\n    }\n\n    if (!event.data.data && !event.data.error) {\n      return;\n    }\n\n    this.stop();\n\n    if (event.data.error) {\n      this.callback(errors.extend(event.data.error), null);\n    } else {\n      if (event.data.data.scopes) {\n        event.data.data.scope = event.data.data.scopes;\n        delete event.data.data.scopes;\n      }\n      if (event.data.data.expires_in) {\n        event.data.data.expires_in = parseInt(event.data.data.expires_in) || 0;\n      }\n      this.callback(null, event.data.data);\n    }\n  }\n}\n","import Listener from '../helpers/listener';\n/**\n * Class for authentication using popup.\n */\nexport default class Popup {\n  // eslint-disable-next-line require-jsdoc\n  constructor(sdk, options) {\n    this.options = options;\n    this.sdk = sdk;\n  }\n\n  /**\n   * run popup authorization flow, should be called in a click handler to avoid beeing blocked\n   * @return {Promise} promise that resolves to authorize data or error\n   */\n  authorize() {\n    return new Promise((resolve, reject) => {\n      const url = this.sdk.authorizeURL(this.options, 'button');\n\n      const w = 500;\n      const h = 650;\n      const left = window.screen.width / 2 - w / 2;\n      const top = window.screen.height / 2 - h / 2;\n\n      const listener = new Listener(this.options);\n      listener.start(null, (err, authorizeData) => {\n        if (err) {\n          return reject(err);\n        }\n        resolve(authorizeData);\n      });\n\n      var open = function () {\n        window.open(\n          url,\n          'livechat-login-popup',\n          `resizable,scrollbars,width=${w},height=${h},left=${left},top=${top}`\n        );\n      };\n\n      if (document.requestStorageAccess) {\n        var promise = document.requestStorageAccess();\n        promise.then(open, open);\n      } else {\n        open();\n      }\n    });\n  }\n}\n","'use strict';\n\nvar has = Object.prototype.hasOwnProperty;\nvar isArray = Array.isArray;\n\nvar hexTable = (function () {\n    var array = [];\n    for (var i = 0; i < 256; ++i) {\n        array.push('%' + ((i < 16 ? '0' : '') + i.toString(16)).toUpperCase());\n    }\n\n    return array;\n}());\n\nvar compactQueue = function compactQueue(queue) {\n    while (queue.length > 1) {\n        var item = queue.pop();\n        var obj = item.obj[item.prop];\n\n        if (isArray(obj)) {\n            var compacted = [];\n\n            for (var j = 0; j < obj.length; ++j) {\n                if (typeof obj[j] !== 'undefined') {\n                    compacted.push(obj[j]);\n                }\n            }\n\n            item.obj[item.prop] = compacted;\n        }\n    }\n};\n\nvar arrayToObject = function arrayToObject(source, options) {\n    var obj = options && options.plainObjects ? Object.create(null) : {};\n    for (var i = 0; i < source.length; ++i) {\n        if (typeof source[i] !== 'undefined') {\n            obj[i] = source[i];\n        }\n    }\n\n    return obj;\n};\n\nvar merge = function merge(target, source, options) {\n    /* eslint no-param-reassign: 0 */\n    if (!source) {\n        return target;\n    }\n\n    if (typeof source !== 'object') {\n        if (isArray(target)) {\n            target.push(source);\n        } else if (target && typeof target === 'object') {\n            if ((options && (options.plainObjects || options.allowPrototypes)) || !has.call(Object.prototype, source)) {\n                target[source] = true;\n            }\n        } else {\n            return [target, source];\n        }\n\n        return target;\n    }\n\n    if (!target || typeof target !== 'object') {\n        return [target].concat(source);\n    }\n\n    var mergeTarget = target;\n    if (isArray(target) && !isArray(source)) {\n        mergeTarget = arrayToObject(target, options);\n    }\n\n    if (isArray(target) && isArray(source)) {\n        source.forEach(function (item, i) {\n            if (has.call(target, i)) {\n                var targetItem = target[i];\n                if (targetItem && typeof targetItem === 'object' && item && typeof item === 'object') {\n                    target[i] = merge(targetItem, item, options);\n                } else {\n                    target.push(item);\n                }\n            } else {\n                target[i] = item;\n            }\n        });\n        return target;\n    }\n\n    return Object.keys(source).reduce(function (acc, key) {\n        var value = source[key];\n\n        if (has.call(acc, key)) {\n            acc[key] = merge(acc[key], value, options);\n        } else {\n            acc[key] = value;\n        }\n        return acc;\n    }, mergeTarget);\n};\n\nvar assign = function assignSingleSource(target, source) {\n    return Object.keys(source).reduce(function (acc, key) {\n        acc[key] = source[key];\n        return acc;\n    }, target);\n};\n\nvar decode = function (str, decoder, charset) {\n    var strWithoutPlus = str.replace(/\\+/g, ' ');\n    if (charset === 'iso-8859-1') {\n        // unescape never throws, no try...catch needed:\n        return strWithoutPlus.replace(/%[0-9a-f]{2}/gi, unescape);\n    }\n    // utf-8\n    try {\n        return decodeURIComponent(strWithoutPlus);\n    } catch (e) {\n        return strWithoutPlus;\n    }\n};\n\nvar encode = function encode(str, defaultEncoder, charset) {\n    // This code was originally written by Brian White (mscdex) for the io.js core querystring library.\n    // It has been adapted here for stricter adherence to RFC 3986\n    if (str.length === 0) {\n        return str;\n    }\n\n    var string = str;\n    if (typeof str === 'symbol') {\n        string = Symbol.prototype.toString.call(str);\n    } else if (typeof str !== 'string') {\n        string = String(str);\n    }\n\n    if (charset === 'iso-8859-1') {\n        return escape(string).replace(/%u[0-9a-f]{4}/gi, function ($0) {\n            return '%26%23' + parseInt($0.slice(2), 16) + '%3B';\n        });\n    }\n\n    var out = '';\n    for (var i = 0; i < string.length; ++i) {\n        var c = string.charCodeAt(i);\n\n        if (\n            c === 0x2D // -\n            || c === 0x2E // .\n            || c === 0x5F // _\n            || c === 0x7E // ~\n            || (c >= 0x30 && c <= 0x39) // 0-9\n            || (c >= 0x41 && c <= 0x5A) // a-z\n            || (c >= 0x61 && c <= 0x7A) // A-Z\n        ) {\n            out += string.charAt(i);\n            continue;\n        }\n\n        if (c < 0x80) {\n            out = out + hexTable[c];\n            continue;\n        }\n\n        if (c < 0x800) {\n            out = out + (hexTable[0xC0 | (c >> 6)] + hexTable[0x80 | (c & 0x3F)]);\n            continue;\n        }\n\n        if (c < 0xD800 || c >= 0xE000) {\n            out = out + (hexTable[0xE0 | (c >> 12)] + hexTable[0x80 | ((c >> 6) & 0x3F)] + hexTable[0x80 | (c & 0x3F)]);\n            continue;\n        }\n\n        i += 1;\n        c = 0x10000 + (((c & 0x3FF) << 10) | (string.charCodeAt(i) & 0x3FF));\n        out += hexTable[0xF0 | (c >> 18)]\n            + hexTable[0x80 | ((c >> 12) & 0x3F)]\n            + hexTable[0x80 | ((c >> 6) & 0x3F)]\n            + hexTable[0x80 | (c & 0x3F)];\n    }\n\n    return out;\n};\n\nvar compact = function compact(value) {\n    var queue = [{ obj: { o: value }, prop: 'o' }];\n    var refs = [];\n\n    for (var i = 0; i < queue.length; ++i) {\n        var item = queue[i];\n        var obj = item.obj[item.prop];\n\n        var keys = Object.keys(obj);\n        for (var j = 0; j < keys.length; ++j) {\n            var key = keys[j];\n            var val = obj[key];\n            if (typeof val === 'object' && val !== null && refs.indexOf(val) === -1) {\n                queue.push({ obj: obj, prop: key });\n                refs.push(val);\n            }\n        }\n    }\n\n    compactQueue(queue);\n\n    return value;\n};\n\nvar isRegExp = function isRegExp(obj) {\n    return Object.prototype.toString.call(obj) === '[object RegExp]';\n};\n\nvar isBuffer = function isBuffer(obj) {\n    if (!obj || typeof obj !== 'object') {\n        return false;\n    }\n\n    return !!(obj.constructor && obj.constructor.isBuffer && obj.constructor.isBuffer(obj));\n};\n\nvar combine = function combine(a, b) {\n    return [].concat(a, b);\n};\n\nvar maybeMap = function maybeMap(val, fn) {\n    if (isArray(val)) {\n        var mapped = [];\n        for (var i = 0; i < val.length; i += 1) {\n            mapped.push(fn(val[i]));\n        }\n        return mapped;\n    }\n    return fn(val);\n};\n\nmodule.exports = {\n    arrayToObject: arrayToObject,\n    assign: assign,\n    combine: combine,\n    compact: compact,\n    decode: decode,\n    encode: encode,\n    isBuffer: isBuffer,\n    isRegExp: isRegExp,\n    maybeMap: maybeMap,\n    merge: merge\n};\n","'use strict';\n\nvar replace = String.prototype.replace;\nvar percentTwenties = /%20/g;\n\nvar util = require('./utils');\n\nvar Format = {\n    RFC1738: 'RFC1738',\n    RFC3986: 'RFC3986'\n};\n\nmodule.exports = util.assign(\n    {\n        'default': Format.RFC3986,\n        formatters: {\n            RFC1738: function (value) {\n                return replace.call(value, percentTwenties, '+');\n            },\n            RFC3986: function (value) {\n                return String(value);\n            }\n        }\n    },\n    Format\n);\n","'use strict';\n\nvar utils = require('./utils');\nvar formats = require('./formats');\nvar has = Object.prototype.hasOwnProperty;\n\nvar arrayPrefixGenerators = {\n    brackets: function brackets(prefix) {\n        return prefix + '[]';\n    },\n    comma: 'comma',\n    indices: function indices(prefix, key) {\n        return prefix + '[' + key + ']';\n    },\n    repeat: function repeat(prefix) {\n        return prefix;\n    }\n};\n\nvar isArray = Array.isArray;\nvar push = Array.prototype.push;\nvar pushToArray = function (arr, valueOrArray) {\n    push.apply(arr, isArray(valueOrArray) ? valueOrArray : [valueOrArray]);\n};\n\nvar toISO = Date.prototype.toISOString;\n\nvar defaultFormat = formats['default'];\nvar defaults = {\n    addQueryPrefix: false,\n    allowDots: false,\n    charset: 'utf-8',\n    charsetSentinel: false,\n    delimiter: '&',\n    encode: true,\n    encoder: utils.encode,\n    encodeValuesOnly: false,\n    format: defaultFormat,\n    formatter: formats.formatters[defaultFormat],\n    // deprecated\n    indices: false,\n    serializeDate: function serializeDate(date) {\n        return toISO.call(date);\n    },\n    skipNulls: false,\n    strictNullHandling: false\n};\n\nvar isNonNullishPrimitive = function isNonNullishPrimitive(v) {\n    return typeof v === 'string'\n        || typeof v === 'number'\n        || typeof v === 'boolean'\n        || typeof v === 'symbol'\n        || typeof v === 'bigint';\n};\n\nvar stringify = function stringify(\n    object,\n    prefix,\n    generateArrayPrefix,\n    strictNullHandling,\n    skipNulls,\n    encoder,\n    filter,\n    sort,\n    allowDots,\n    serializeDate,\n    formatter,\n    encodeValuesOnly,\n    charset\n) {\n    var obj = object;\n    if (typeof filter === 'function') {\n        obj = filter(prefix, obj);\n    } else if (obj instanceof Date) {\n        obj = serializeDate(obj);\n    } else if (generateArrayPrefix === 'comma' && isArray(obj)) {\n        obj = utils.maybeMap(obj, function (value) {\n            if (value instanceof Date) {\n                return serializeDate(value);\n            }\n            return value;\n        }).join(',');\n    }\n\n    if (obj === null) {\n        if (strictNullHandling) {\n            return encoder && !encodeValuesOnly ? encoder(prefix, defaults.encoder, charset, 'key') : prefix;\n        }\n\n        obj = '';\n    }\n\n    if (isNonNullishPrimitive(obj) || utils.isBuffer(obj)) {\n        if (encoder) {\n            var keyValue = encodeValuesOnly ? prefix : encoder(prefix, defaults.encoder, charset, 'key');\n            return [formatter(keyValue) + '=' + formatter(encoder(obj, defaults.encoder, charset, 'value'))];\n        }\n        return [formatter(prefix) + '=' + formatter(String(obj))];\n    }\n\n    var values = [];\n\n    if (typeof obj === 'undefined') {\n        return values;\n    }\n\n    var objKeys;\n    if (isArray(filter)) {\n        objKeys = filter;\n    } else {\n        var keys = Object.keys(obj);\n        objKeys = sort ? keys.sort(sort) : keys;\n    }\n\n    for (var i = 0; i < objKeys.length; ++i) {\n        var key = objKeys[i];\n        var value = obj[key];\n\n        if (skipNulls && value === null) {\n            continue;\n        }\n\n        var keyPrefix = isArray(obj)\n            ? typeof generateArrayPrefix === 'function' ? generateArrayPrefix(prefix, key) : prefix\n            : prefix + (allowDots ? '.' + key : '[' + key + ']');\n\n        pushToArray(values, stringify(\n            value,\n            keyPrefix,\n            generateArrayPrefix,\n            strictNullHandling,\n            skipNulls,\n            encoder,\n            filter,\n            sort,\n            allowDots,\n            serializeDate,\n            formatter,\n            encodeValuesOnly,\n            charset\n        ));\n    }\n\n    return values;\n};\n\nvar normalizeStringifyOptions = function normalizeStringifyOptions(opts) {\n    if (!opts) {\n        return defaults;\n    }\n\n    if (opts.encoder !== null && opts.encoder !== undefined && typeof opts.encoder !== 'function') {\n        throw new TypeError('Encoder has to be a function.');\n    }\n\n    var charset = opts.charset || defaults.charset;\n    if (typeof opts.charset !== 'undefined' && opts.charset !== 'utf-8' && opts.charset !== 'iso-8859-1') {\n        throw new TypeError('The charset option must be either utf-8, iso-8859-1, or undefined');\n    }\n\n    var format = formats['default'];\n    if (typeof opts.format !== 'undefined') {\n        if (!has.call(formats.formatters, opts.format)) {\n            throw new TypeError('Unknown format option provided.');\n        }\n        format = opts.format;\n    }\n    var formatter = formats.formatters[format];\n\n    var filter = defaults.filter;\n    if (typeof opts.filter === 'function' || isArray(opts.filter)) {\n        filter = opts.filter;\n    }\n\n    return {\n        addQueryPrefix: typeof opts.addQueryPrefix === 'boolean' ? opts.addQueryPrefix : defaults.addQueryPrefix,\n        allowDots: typeof opts.allowDots === 'undefined' ? defaults.allowDots : !!opts.allowDots,\n        charset: charset,\n        charsetSentinel: typeof opts.charsetSentinel === 'boolean' ? opts.charsetSentinel : defaults.charsetSentinel,\n        delimiter: typeof opts.delimiter === 'undefined' ? defaults.delimiter : opts.delimiter,\n        encode: typeof opts.encode === 'boolean' ? opts.encode : defaults.encode,\n        encoder: typeof opts.encoder === 'function' ? opts.encoder : defaults.encoder,\n        encodeValuesOnly: typeof opts.encodeValuesOnly === 'boolean' ? opts.encodeValuesOnly : defaults.encodeValuesOnly,\n        filter: filter,\n        formatter: formatter,\n        serializeDate: typeof opts.serializeDate === 'function' ? opts.serializeDate : defaults.serializeDate,\n        skipNulls: typeof opts.skipNulls === 'boolean' ? opts.skipNulls : defaults.skipNulls,\n        sort: typeof opts.sort === 'function' ? opts.sort : null,\n        strictNullHandling: typeof opts.strictNullHandling === 'boolean' ? opts.strictNullHandling : defaults.strictNullHandling\n    };\n};\n\nmodule.exports = function (object, opts) {\n    var obj = object;\n    var options = normalizeStringifyOptions(opts);\n\n    var objKeys;\n    var filter;\n\n    if (typeof options.filter === 'function') {\n        filter = options.filter;\n        obj = filter('', obj);\n    } else if (isArray(options.filter)) {\n        filter = options.filter;\n        objKeys = filter;\n    }\n\n    var keys = [];\n\n    if (typeof obj !== 'object' || obj === null) {\n        return '';\n    }\n\n    var arrayFormat;\n    if (opts && opts.arrayFormat in arrayPrefixGenerators) {\n        arrayFormat = opts.arrayFormat;\n    } else if (opts && 'indices' in opts) {\n        arrayFormat = opts.indices ? 'indices' : 'repeat';\n    } else {\n        arrayFormat = 'indices';\n    }\n\n    var generateArrayPrefix = arrayPrefixGenerators[arrayFormat];\n\n    if (!objKeys) {\n        objKeys = Object.keys(obj);\n    }\n\n    if (options.sort) {\n        objKeys.sort(options.sort);\n    }\n\n    for (var i = 0; i < objKeys.length; ++i) {\n        var key = objKeys[i];\n\n        if (options.skipNulls && obj[key] === null) {\n            continue;\n        }\n        pushToArray(keys, stringify(\n            obj[key],\n            key,\n            generateArrayPrefix,\n            options.strictNullHandling,\n            options.skipNulls,\n            options.encode ? options.encoder : null,\n            options.filter,\n            options.sort,\n            options.allowDots,\n            options.serializeDate,\n            options.formatter,\n            options.encodeValuesOnly,\n            options.charset\n        ));\n    }\n\n    var joined = keys.join(options.delimiter);\n    var prefix = options.addQueryPrefix === true ? '?' : '';\n\n    if (options.charsetSentinel) {\n        if (options.charset === 'iso-8859-1') {\n            // encodeURIComponent('&#10003;'), the \"numeric entity\" representation of a checkmark\n            prefix += 'utf8=%26%2310003%3B&';\n        } else {\n            // encodeURIComponent('✓')\n            prefix += 'utf8=%E2%9C%93&';\n        }\n    }\n\n    return joined.length > 0 ? prefix + joined : '';\n};\n","'use strict';\n\nvar utils = require('./utils');\n\nvar has = Object.prototype.hasOwnProperty;\nvar isArray = Array.isArray;\n\nvar defaults = {\n    allowDots: false,\n    allowPrototypes: false,\n    arrayLimit: 20,\n    charset: 'utf-8',\n    charsetSentinel: false,\n    comma: false,\n    decoder: utils.decode,\n    delimiter: '&',\n    depth: 5,\n    ignoreQueryPrefix: false,\n    interpretNumericEntities: false,\n    parameterLimit: 1000,\n    parseArrays: true,\n    plainObjects: false,\n    strictNullHandling: false\n};\n\nvar interpretNumericEntities = function (str) {\n    return str.replace(/&#(\\d+);/g, function ($0, numberStr) {\n        return String.fromCharCode(parseInt(numberStr, 10));\n    });\n};\n\nvar parseArrayValue = function (val, options) {\n    if (val && typeof val === 'string' && options.comma && val.indexOf(',') > -1) {\n        return val.split(',');\n    }\n\n    return val;\n};\n\n// This is what browsers will submit when the ✓ character occurs in an\n// application/x-www-form-urlencoded body and the encoding of the page containing\n// the form is iso-8859-1, or when the submitted form has an accept-charset\n// attribute of iso-8859-1. Presumably also with other charsets that do not contain\n// the ✓ character, such as us-ascii.\nvar isoSentinel = 'utf8=%26%2310003%3B'; // encodeURIComponent('&#10003;')\n\n// These are the percent-encoded utf-8 octets representing a checkmark, indicating that the request actually is utf-8 encoded.\nvar charsetSentinel = 'utf8=%E2%9C%93'; // encodeURIComponent('✓')\n\nvar parseValues = function parseQueryStringValues(str, options) {\n    var obj = {};\n    var cleanStr = options.ignoreQueryPrefix ? str.replace(/^\\?/, '') : str;\n    var limit = options.parameterLimit === Infinity ? undefined : options.parameterLimit;\n    var parts = cleanStr.split(options.delimiter, limit);\n    var skipIndex = -1; // Keep track of where the utf8 sentinel was found\n    var i;\n\n    var charset = options.charset;\n    if (options.charsetSentinel) {\n        for (i = 0; i < parts.length; ++i) {\n            if (parts[i].indexOf('utf8=') === 0) {\n                if (parts[i] === charsetSentinel) {\n                    charset = 'utf-8';\n                } else if (parts[i] === isoSentinel) {\n                    charset = 'iso-8859-1';\n                }\n                skipIndex = i;\n                i = parts.length; // The eslint settings do not allow break;\n            }\n        }\n    }\n\n    for (i = 0; i < parts.length; ++i) {\n        if (i === skipIndex) {\n            continue;\n        }\n        var part = parts[i];\n\n        var bracketEqualsPos = part.indexOf(']=');\n        var pos = bracketEqualsPos === -1 ? part.indexOf('=') : bracketEqualsPos + 1;\n\n        var key, val;\n        if (pos === -1) {\n            key = options.decoder(part, defaults.decoder, charset, 'key');\n            val = options.strictNullHandling ? null : '';\n        } else {\n            key = options.decoder(part.slice(0, pos), defaults.decoder, charset, 'key');\n            val = utils.maybeMap(\n                parseArrayValue(part.slice(pos + 1), options),\n                function (encodedVal) {\n                    return options.decoder(encodedVal, defaults.decoder, charset, 'value');\n                }\n            );\n        }\n\n        if (val && options.interpretNumericEntities && charset === 'iso-8859-1') {\n            val = interpretNumericEntities(val);\n        }\n\n        if (part.indexOf('[]=') > -1) {\n            val = isArray(val) ? [val] : val;\n        }\n\n        if (has.call(obj, key)) {\n            obj[key] = utils.combine(obj[key], val);\n        } else {\n            obj[key] = val;\n        }\n    }\n\n    return obj;\n};\n\nvar parseObject = function (chain, val, options, valuesParsed) {\n    var leaf = valuesParsed ? val : parseArrayValue(val, options);\n\n    for (var i = chain.length - 1; i >= 0; --i) {\n        var obj;\n        var root = chain[i];\n\n        if (root === '[]' && options.parseArrays) {\n            obj = [].concat(leaf);\n        } else {\n            obj = options.plainObjects ? Object.create(null) : {};\n            var cleanRoot = root.charAt(0) === '[' && root.charAt(root.length - 1) === ']' ? root.slice(1, -1) : root;\n            var index = parseInt(cleanRoot, 10);\n            if (!options.parseArrays && cleanRoot === '') {\n                obj = { 0: leaf };\n            } else if (\n                !isNaN(index)\n                && root !== cleanRoot\n                && String(index) === cleanRoot\n                && index >= 0\n                && (options.parseArrays && index <= options.arrayLimit)\n            ) {\n                obj = [];\n                obj[index] = leaf;\n            } else {\n                obj[cleanRoot] = leaf;\n            }\n        }\n\n        leaf = obj; // eslint-disable-line no-param-reassign\n    }\n\n    return leaf;\n};\n\nvar parseKeys = function parseQueryStringKeys(givenKey, val, options, valuesParsed) {\n    if (!givenKey) {\n        return;\n    }\n\n    // Transform dot notation to bracket notation\n    var key = options.allowDots ? givenKey.replace(/\\.([^.[]+)/g, '[$1]') : givenKey;\n\n    // The regex chunks\n\n    var brackets = /(\\[[^[\\]]*])/;\n    var child = /(\\[[^[\\]]*])/g;\n\n    // Get the parent\n\n    var segment = options.depth > 0 && brackets.exec(key);\n    var parent = segment ? key.slice(0, segment.index) : key;\n\n    // Stash the parent if it exists\n\n    var keys = [];\n    if (parent) {\n        // If we aren't using plain objects, optionally prefix keys that would overwrite object prototype properties\n        if (!options.plainObjects && has.call(Object.prototype, parent)) {\n            if (!options.allowPrototypes) {\n                return;\n            }\n        }\n\n        keys.push(parent);\n    }\n\n    // Loop through children appending to the array until we hit depth\n\n    var i = 0;\n    while (options.depth > 0 && (segment = child.exec(key)) !== null && i < options.depth) {\n        i += 1;\n        if (!options.plainObjects && has.call(Object.prototype, segment[1].slice(1, -1))) {\n            if (!options.allowPrototypes) {\n                return;\n            }\n        }\n        keys.push(segment[1]);\n    }\n\n    // If there's a remainder, just add whatever is left\n\n    if (segment) {\n        keys.push('[' + key.slice(segment.index) + ']');\n    }\n\n    return parseObject(keys, val, options, valuesParsed);\n};\n\nvar normalizeParseOptions = function normalizeParseOptions(opts) {\n    if (!opts) {\n        return defaults;\n    }\n\n    if (opts.decoder !== null && opts.decoder !== undefined && typeof opts.decoder !== 'function') {\n        throw new TypeError('Decoder has to be a function.');\n    }\n\n    if (typeof opts.charset !== 'undefined' && opts.charset !== 'utf-8' && opts.charset !== 'iso-8859-1') {\n        throw new TypeError('The charset option must be either utf-8, iso-8859-1, or undefined');\n    }\n    var charset = typeof opts.charset === 'undefined' ? defaults.charset : opts.charset;\n\n    return {\n        allowDots: typeof opts.allowDots === 'undefined' ? defaults.allowDots : !!opts.allowDots,\n        allowPrototypes: typeof opts.allowPrototypes === 'boolean' ? opts.allowPrototypes : defaults.allowPrototypes,\n        arrayLimit: typeof opts.arrayLimit === 'number' ? opts.arrayLimit : defaults.arrayLimit,\n        charset: charset,\n        charsetSentinel: typeof opts.charsetSentinel === 'boolean' ? opts.charsetSentinel : defaults.charsetSentinel,\n        comma: typeof opts.comma === 'boolean' ? opts.comma : defaults.comma,\n        decoder: typeof opts.decoder === 'function' ? opts.decoder : defaults.decoder,\n        delimiter: typeof opts.delimiter === 'string' || utils.isRegExp(opts.delimiter) ? opts.delimiter : defaults.delimiter,\n        // eslint-disable-next-line no-implicit-coercion, no-extra-parens\n        depth: (typeof opts.depth === 'number' || opts.depth === false) ? +opts.depth : defaults.depth,\n        ignoreQueryPrefix: opts.ignoreQueryPrefix === true,\n        interpretNumericEntities: typeof opts.interpretNumericEntities === 'boolean' ? opts.interpretNumericEntities : defaults.interpretNumericEntities,\n        parameterLimit: typeof opts.parameterLimit === 'number' ? opts.parameterLimit : defaults.parameterLimit,\n        parseArrays: opts.parseArrays !== false,\n        plainObjects: typeof opts.plainObjects === 'boolean' ? opts.plainObjects : defaults.plainObjects,\n        strictNullHandling: typeof opts.strictNullHandling === 'boolean' ? opts.strictNullHandling : defaults.strictNullHandling\n    };\n};\n\nmodule.exports = function (str, opts) {\n    var options = normalizeParseOptions(opts);\n\n    if (str === '' || str === null || typeof str === 'undefined') {\n        return options.plainObjects ? Object.create(null) : {};\n    }\n\n    var tempObj = typeof str === 'string' ? parseValues(str, options) : str;\n    var obj = options.plainObjects ? Object.create(null) : {};\n\n    // Iterate over the keys and setup the new object\n\n    var keys = Object.keys(tempObj);\n    for (var i = 0; i < keys.length; ++i) {\n        var key = keys[i];\n        var newObj = parseKeys(key, tempObj[key], options, typeof str === 'string');\n        obj = utils.merge(obj, newObj, options);\n    }\n\n    return utils.compact(obj);\n};\n","'use strict';\n\nvar stringify = require('./stringify');\nvar parse = require('./parse');\nvar formats = require('./formats');\n\nmodule.exports = {\n    formats: formats,\n    parse: parse,\n    stringify: stringify\n};\n","/* eslint-disable require-jsdoc */\n\n/** @fileOverview\n * @author Auth0 https://github.com/auth0/auth0.js\n * @license MIT\n */\n\nexport function pick(object, keys) {\n  return keys.reduce((prev, key) => {\n    if (object[key]) {\n      prev[key] = object[key];\n    }\n    return prev;\n  }, {});\n}\n","import errors from '../helpers/errors';\nimport qs from 'qs';\nimport {pick} from '../helpers/object';\n\n// eslint-disable-next-line require-jsdoc\nexport default class Redirect {\n  // eslint-disable-next-line require-jsdoc\n  constructor(sdk, options) {\n    this.options = options;\n    this.sdk = sdk;\n  }\n\n  /**\n   * run default authorization flow\n   */\n  authorize() {\n    const url = this.sdk.authorizeURL(this.options);\n    window.location = url;\n  }\n\n  /**\n   * this function checks if the current origin was redirected to with authorize data\n   * @return {Promise} promise that resolves to authorize data or error\n   */\n  authorizeData() {\n    return new Promise((resolve, reject) => {\n      let authorizeData = {};\n      let requiredFields = [];\n\n      switch (this.options.response_type) {\n        case 'token':\n          requiredFields = ['access_token', 'expires_in', 'token_type'];\n\n          authorizeData = qs.parse(window.location.hash.substring(1));\n          authorizeData = pick(authorizeData, [\n            'access_token',\n            'expires_in',\n            'state',\n            'scope',\n            'token_type',\n          ]);\n\n          if (\n            !requiredFields.every((field) =>\n              authorizeData.hasOwnProperty(field)\n            )\n          ) {\n            reject(errors.extend({identity_exception: 'unauthorized'}));\n            return;\n          }\n\n          authorizeData.expires_in = parseInt(authorizeData.expires_in);\n          break;\n\n        case 'code':\n          requiredFields = ['code'];\n\n          authorizeData = qs.parse(window.location.search, {\n            ignoreQueryPrefix: true,\n          });\n          authorizeData = pick(authorizeData, ['state', 'code']);\n\n          if (\n            !requiredFields.every((field) =>\n              authorizeData.hasOwnProperty(field)\n            )\n          ) {\n            reject(errors.extend({identity_exception: 'unauthorized'}));\n            return;\n          }\n      }\n\n      resolve(authorizeData);\n    });\n  }\n}\n","import Listener from '../helpers/listener';\n\n/**\n * Class for authentication using Iframe\n */\nexport default class Iframe {\n  // eslint-disable-next-line require-jsdoc\n  constructor(sdk, options) {\n    this.options = options;\n    this.sdk = sdk;\n  }\n\n  /**\n   * run iframe authorization flow, not recommended because of ITP 2.0\n   * @return {Promise} promise that resolves to authorize data or error\n   */\n  authorize() {\n    return new Promise((resolve, reject) => {\n      const url = this.sdk.authorizeURL(this.options, 'button');\n\n      const listener = new Listener(this.options);\n\n      const cb = (err, authorizeData) => {\n        this.removeIframe();\n        if (err) {\n          return reject(err);\n        }\n        resolve(authorizeData);\n      };\n\n      listener.start(5000, cb);\n\n      const iframe = document.createElement('iframe');\n      iframe.setAttribute('src', url);\n      iframe.setAttribute('id', this.iframeID());\n      iframe.style.width = '1px';\n      iframe.style.height = '1px';\n      iframe.style.position = 'fixed';\n      iframe.style.top = '0';\n      iframe.style.right = '0';\n      iframe.style.opacity = '0';\n      iframe.style.visibility = 'none';\n\n      document.body.appendChild(iframe);\n    });\n  }\n\n  // eslint-disable-next-line require-jsdoc\n  iframeID() {\n    return this.options.client_id + this.options.response_type;\n  }\n\n  // eslint-disable-next-line require-jsdoc\n  removeIframe() {\n    const ref = document.getElementById(this.iframeID());\n    if (ref && ref.parentNode) {\n      ref.parentNode.removeChild(ref);\n    }\n  }\n}\n","/* eslint-disable require-jsdoc */\n\n/** @fileOverview\n * @author Auth0 https://github.com/auth0/auth0.js\n * @license MIT\n */\n\nfunction string(length) {\n  const bytes = new Uint8Array(length);\n  const result = [];\n  const charset =\n    '0123456789ABCDEFGHIJKLMNOPQRSTUVXYZabcdefghijklmnopqrstuvwxyz-._~';\n\n  const cryptoObj = window.crypto || window.msCrypto;\n  let random = '';\n  if (!cryptoObj) {\n    for (let i = 0; i < length; i++) {\n      random += charset.charAt(Math.floor(Math.random() * charset.length));\n    }\n  } else {\n    random = cryptoObj.getRandomValues(bytes);\n  }\n\n  for (let a = 0; a < random.length; a++) {\n    result.push(charset[random[a] % charset.length]);\n  }\n\n  return result.join('');\n}\n\nexport default {\n  string: string,\n};\n","/* eslint-disable require-jsdoc */\n\n/** @fileOverview\n * @author Auth0 https://github.com/auth0/auth0.js\n * @license MIT\n */\n\nfunction DummyStorage() {}\n\nDummyStorage.prototype.getItem = function () {\n  return null;\n};\n\nDummyStorage.prototype.removeItem = function () {};\n\nDummyStorage.prototype.setItem = function () {};\n\nexport default DummyStorage;\n","/*!\n * JavaScript Cookie v2.2.1\n * https://github.com/js-cookie/js-cookie\n *\n * Copyright 2006, 2015 Klaus Hartl & Fagner Brack\n * Released under the MIT license\n */\n;(function (factory) {\n\tvar registeredInModuleLoader;\n\tif (typeof define === 'function' && define.amd) {\n\t\tdefine(factory);\n\t\tregisteredInModuleLoader = true;\n\t}\n\tif (typeof exports === 'object') {\n\t\tmodule.exports = factory();\n\t\tregisteredInModuleLoader = true;\n\t}\n\tif (!registeredInModuleLoader) {\n\t\tvar OldCookies = window.Cookies;\n\t\tvar api = window.Cookies = factory();\n\t\tapi.noConflict = function () {\n\t\t\twindow.Cookies = OldCookies;\n\t\t\treturn api;\n\t\t};\n\t}\n}(function () {\n\tfunction extend () {\n\t\tvar i = 0;\n\t\tvar result = {};\n\t\tfor (; i < arguments.length; i++) {\n\t\t\tvar attributes = arguments[ i ];\n\t\t\tfor (var key in attributes) {\n\t\t\t\tresult[key] = attributes[key];\n\t\t\t}\n\t\t}\n\t\treturn result;\n\t}\n\n\tfunction decode (s) {\n\t\treturn s.replace(/(%[0-9A-Z]{2})+/g, decodeURIComponent);\n\t}\n\n\tfunction init (converter) {\n\t\tfunction api() {}\n\n\t\tfunction set (key, value, attributes) {\n\t\t\tif (typeof document === 'undefined') {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tattributes = extend({\n\t\t\t\tpath: '/'\n\t\t\t}, api.defaults, attributes);\n\n\t\t\tif (typeof attributes.expires === 'number') {\n\t\t\t\tattributes.expires = new Date(new Date() * 1 + attributes.expires * 864e+5);\n\t\t\t}\n\n\t\t\t// We're using \"expires\" because \"max-age\" is not supported by IE\n\t\t\tattributes.expires = attributes.expires ? attributes.expires.toUTCString() : '';\n\n\t\t\ttry {\n\t\t\t\tvar result = JSON.stringify(value);\n\t\t\t\tif (/^[\\{\\[]/.test(result)) {\n\t\t\t\t\tvalue = result;\n\t\t\t\t}\n\t\t\t} catch (e) {}\n\n\t\t\tvalue = converter.write ?\n\t\t\t\tconverter.write(value, key) :\n\t\t\t\tencodeURIComponent(String(value))\n\t\t\t\t\t.replace(/%(23|24|26|2B|3A|3C|3E|3D|2F|3F|40|5B|5D|5E|60|7B|7D|7C)/g, decodeURIComponent);\n\n\t\t\tkey = encodeURIComponent(String(key))\n\t\t\t\t.replace(/%(23|24|26|2B|5E|60|7C)/g, decodeURIComponent)\n\t\t\t\t.replace(/[\\(\\)]/g, escape);\n\n\t\t\tvar stringifiedAttributes = '';\n\t\t\tfor (var attributeName in attributes) {\n\t\t\t\tif (!attributes[attributeName]) {\n\t\t\t\t\tcontinue;\n\t\t\t\t}\n\t\t\t\tstringifiedAttributes += '; ' + attributeName;\n\t\t\t\tif (attributes[attributeName] === true) {\n\t\t\t\t\tcontinue;\n\t\t\t\t}\n\n\t\t\t\t// Considers RFC 6265 section 5.2:\n\t\t\t\t// ...\n\t\t\t\t// 3.  If the remaining unparsed-attributes contains a %x3B (\";\")\n\t\t\t\t//     character:\n\t\t\t\t// Consume the characters of the unparsed-attributes up to,\n\t\t\t\t// not including, the first %x3B (\";\") character.\n\t\t\t\t// ...\n\t\t\t\tstringifiedAttributes += '=' + attributes[attributeName].split(';')[0];\n\t\t\t}\n\n\t\t\treturn (document.cookie = key + '=' + value + stringifiedAttributes);\n\t\t}\n\n\t\tfunction get (key, json) {\n\t\t\tif (typeof document === 'undefined') {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tvar jar = {};\n\t\t\t// To prevent the for loop in the first place assign an empty array\n\t\t\t// in case there are no cookies at all.\n\t\t\tvar cookies = document.cookie ? document.cookie.split('; ') : [];\n\t\t\tvar i = 0;\n\n\t\t\tfor (; i < cookies.length; i++) {\n\t\t\t\tvar parts = cookies[i].split('=');\n\t\t\t\tvar cookie = parts.slice(1).join('=');\n\n\t\t\t\tif (!json && cookie.charAt(0) === '\"') {\n\t\t\t\t\tcookie = cookie.slice(1, -1);\n\t\t\t\t}\n\n\t\t\t\ttry {\n\t\t\t\t\tvar name = decode(parts[0]);\n\t\t\t\t\tcookie = (converter.read || converter)(cookie, name) ||\n\t\t\t\t\t\tdecode(cookie);\n\n\t\t\t\t\tif (json) {\n\t\t\t\t\t\ttry {\n\t\t\t\t\t\t\tcookie = JSON.parse(cookie);\n\t\t\t\t\t\t} catch (e) {}\n\t\t\t\t\t}\n\n\t\t\t\t\tjar[name] = cookie;\n\n\t\t\t\t\tif (key === name) {\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\t\t\t\t} catch (e) {}\n\t\t\t}\n\n\t\t\treturn key ? jar[key] : jar;\n\t\t}\n\n\t\tapi.set = set;\n\t\tapi.get = function (key) {\n\t\t\treturn get(key, false /* read as raw */);\n\t\t};\n\t\tapi.getJSON = function (key) {\n\t\t\treturn get(key, true /* read as json */);\n\t\t};\n\t\tapi.remove = function (key, attributes) {\n\t\t\tset(key, '', extend(attributes, {\n\t\t\t\texpires: -1\n\t\t\t}));\n\t\t};\n\n\t\tapi.defaults = {};\n\n\t\tapi.withConverter = init;\n\n\t\treturn api;\n\t}\n\n\treturn init(function () {});\n}));\n","/* eslint-disable require-jsdoc */\n\n/** @fileOverview\n * @author Auth0 https://github.com/auth0/auth0.js\n * @license MIT\n */\n\nimport Cookie from 'js-cookie';\nfunction CookieStorage() {}\n\nCookieStorage.prototype.getItem = function (key) {\n  return Cookie.get(key);\n};\n\nCookieStorage.prototype.removeItem = function (key) {\n  Cookie.remove(key);\n};\n\nCookieStorage.prototype.setItem = function (key, value, options) {\n  const params = Object.assign(\n    {\n      expires: 1, // 1 day\n    },\n    options\n  );\n  Cookie.set(key, value, params);\n};\n\nexport default CookieStorage;\n","/* eslint-disable require-jsdoc */\n\n/** @fileOverview\n * @author Auth0 https://github.com/auth0/auth0.js\n * @license MIT\n */\n\nimport DummyStorage from './dummy';\nimport CookieStorage from './cookie';\n\nfunction StorageHandler(options) {\n  this.storage = new CookieStorage();\n  if (options.force_local_storage !== true) {\n    return;\n  }\n  try {\n    // some browsers throw an error when trying to access localStorage\n    // when localStorage is disabled.\n    const localStorage = window.localStorage;\n    if (localStorage) {\n      this.storage = localStorage;\n    }\n  } catch (e) {\n    console.warn(e);\n    console.warn('Cant use localStorage. Using CookieStorage instead.');\n  }\n}\n\nStorageHandler.prototype.failover = function () {\n  if (this.storage instanceof DummyStorage) {\n    console.warn('DummyStorage: ignore failover');\n    return;\n  } else if (this.storage instanceof CookieStorage) {\n    console.warn('CookieStorage: failing over DummyStorage');\n    this.storage = new DummyStorage();\n  } else {\n    console.warn('LocalStorage: failing over CookieStorage');\n    this.storage = new CookieStorage();\n  }\n};\n\nStorageHandler.prototype.getItem = function (key) {\n  try {\n    return this.storage.getItem(key);\n  } catch (e) {\n    console.warn(e);\n    this.failover();\n    return this.getItem(key);\n  }\n};\n\nStorageHandler.prototype.removeItem = function (key) {\n  try {\n    return this.storage.removeItem(key);\n  } catch (e) {\n    console.warn(e);\n    this.failover();\n    return this.removeItem(key);\n  }\n};\n\nStorageHandler.prototype.setItem = function (key, value, options) {\n  try {\n    return this.storage.setItem(key, value, options);\n  } catch (e) {\n    console.warn(e);\n    this.failover();\n    return this.setItem(key, value, options);\n  }\n};\n\nexport default StorageHandler;\n","/* eslint-disable require-jsdoc */\n\n/** @fileOverview\n * @author Auth0 https://github.com/auth0/auth0.js\n * @license MIT\n */\n\nimport StorageHandler from './storage/handler';\n\nfunction Storage(options) {\n  this.handler = new StorageHandler(options);\n}\n\nStorage.prototype.getItem = function (key) {\n  const value = this.handler.getItem(key);\n  try {\n    return JSON.parse(value);\n  } catch (_) {\n    return value;\n  }\n};\n\nStorage.prototype.removeItem = function (key) {\n  return this.handler.removeItem(key);\n};\n\nStorage.prototype.setItem = function (key, value, options) {\n  const json = JSON.stringify(value);\n  return this.handler.setItem(key, json, options);\n};\n\nexport default Storage;\n","/* eslint-disable require-jsdoc */\n/* internal file */\nimport random from '../helpers/random';\nimport Storage from '../helpers/storage';\n\nexport default class Transaction {\n  constructor(options) {\n    this.options = options.transaction;\n    this.storage = new Storage(this.options);\n  }\n\n  generate(params) {\n    if (!params.state) {\n      params.state = random.string(this.options.key_length);\n    }\n\n    // 30 minutes\n    this.storage.setItem(\n      this.options.namespace + params.state,\n      {state: params.state, code_verifier: params.code_verifier},\n      {expires: 1 / 48}\n    );\n  }\n\n  get(state) {\n    const transactionData = this.storage.getItem(\n      this.options.namespace + state\n    );\n    this.clear(state);\n    return transactionData || {};\n  }\n\n  clear(state) {\n    this.storage.removeItem(this.options.namespace + state);\n  }\n}\n","/** @fileOverview Javascript cryptography implementation.\n *\n * Crush to remove comments, shorten variable names and\n * generally reduce transmission size.\n *\n * @author Emily Stark\n * @author Mike Hamburg\n * @author Dan Boneh\n */\n\n'use strict';\n/*jslint indent: 2, bitwise: false, nomen: false, plusplus: false, white: false, regexp: false */\n/*global document, window, escape, unescape, module, require, Uint32Array */\n\n/**\n * The Stanford Javascript Crypto Library, top-level namespace.\n * @namespace\n */\nvar sjcl = {\n  /**\n   * Symmetric ciphers.\n   * @namespace\n   */\n  cipher: {},\n\n  /**\n   * Hash functions.  Right now only SHA256 is implemented.\n   * @namespace\n   */\n  hash: {},\n\n  /**\n   * Key exchange functions.  Right now only SRP is implemented.\n   * @namespace\n   */\n  keyexchange: {},\n\n  /**\n   * Cipher modes of operation.\n   * @namespace\n   */\n  mode: {},\n\n  /**\n   * Miscellaneous.  HMAC and PBKDF2.\n   * @namespace\n   */\n  misc: {},\n\n  /**\n   * Bit array encoders and decoders.\n   * @namespace\n   *\n   * @description\n   * The members of this namespace are functions which translate between\n   * SJCL's bitArrays and other objects (usually strings).  Because it\n   * isn't always clear which direction is encoding and which is decoding,\n   * the method names are \"fromBits\" and \"toBits\".\n   */\n  codec: {},\n\n  /**\n   * Exceptions.\n   * @namespace\n   */\n  exception: {\n    /**\n     * Ciphertext is corrupt.\n     * @constructor\n     */\n    corrupt: function (message) {\n      this.toString = function () {\n        return 'CORRUPT: ' + this.message;\n      };\n      this.message = message;\n    },\n\n    /**\n     * Invalid parameter.\n     * @constructor\n     */\n    invalid: function (message) {\n      this.toString = function () {\n        return 'INVALID: ' + this.message;\n      };\n      this.message = message;\n    },\n\n    /**\n     * Bug or missing feature in SJCL.\n     * @constructor\n     */\n    bug: function (message) {\n      this.toString = function () {\n        return 'BUG: ' + this.message;\n      };\n      this.message = message;\n    },\n\n    /**\n     * Something isn't ready.\n     * @constructor\n     */\n    notReady: function (message) {\n      this.toString = function () {\n        return 'NOT READY: ' + this.message;\n      };\n      this.message = message;\n    },\n  },\n};\n/** @fileOverview Arrays of bits, encoded as arrays of Numbers.\n *\n * @author Emily Stark\n * @author Mike Hamburg\n * @author Dan Boneh\n */\n\n/**\n * Arrays of bits, encoded as arrays of Numbers.\n * @namespace\n * @description\n * <p>\n * These objects are the currency accepted by SJCL's crypto functions.\n * </p>\n *\n * <p>\n * Most of our crypto primitives operate on arrays of 4-byte words internally,\n * but many of them can take arguments that are not a multiple of 4 bytes.\n * This library encodes arrays of bits (whose size need not be a multiple of 8\n * bits) as arrays of 32-bit words.  The bits are packed, big-endian, into an\n * array of words, 32 bits at a time.  Since the words are double-precision\n * floating point numbers, they fit some extra data.  We use this (in a private,\n * possibly-changing manner) to encode the number of bits actually  present\n * in the last word of the array.\n * </p>\n *\n * <p>\n * Because bitwise ops clear this out-of-band data, these arrays can be passed\n * to ciphers like AES which want arrays of words.\n * </p>\n */\nsjcl.bitArray = {\n  /**\n   * Array slices in units of bits.\n   * @param {bitArray} a The array to slice.\n   * @param {Number} bstart The offset to the start of the slice, in bits.\n   * @param {Number} bend The offset to the end of the slice, in bits.  If this is undefined,\n   * slice until the end of the array.\n   * @return {bitArray} The requested slice.\n   */\n  bitSlice: function (a, bstart, bend) {\n    a = sjcl.bitArray\n      ._shiftRight(a.slice(bstart / 32), 32 - (bstart & 31))\n      .slice(1);\n    return bend === undefined ? a : sjcl.bitArray.clamp(a, bend - bstart);\n  },\n\n  /**\n   * Extract a number packed into a bit array.\n   * @param {bitArray} a The array to slice.\n   * @param {Number} bstart The offset to the start of the slice, in bits.\n   * @param {Number} blength The length of the number to extract.\n   * @return {Number} The requested slice.\n   */\n  extract: function (a, bstart, blength) {\n    // FIXME: this Math.floor is not necessary at all, but for some reason\n    // seems to suppress a bug in the Chromium JIT.\n    var x,\n      sh = Math.floor((-bstart - blength) & 31);\n    if (((bstart + blength - 1) ^ bstart) & -32) {\n      // it crosses a boundary\n      x =\n        (a[(bstart / 32) | 0] << (32 - sh)) ^ (a[(bstart / 32 + 1) | 0] >>> sh);\n    } else {\n      // within a single word\n      x = a[(bstart / 32) | 0] >>> sh;\n    }\n    return x & ((1 << blength) - 1);\n  },\n\n  /**\n   * Concatenate two bit arrays.\n   * @param {bitArray} a1 The first array.\n   * @param {bitArray} a2 The second array.\n   * @return {bitArray} The concatenation of a1 and a2.\n   */\n  concat: function (a1, a2) {\n    if (a1.length === 0 || a2.length === 0) {\n      return a1.concat(a2);\n    }\n\n    var last = a1[a1.length - 1],\n      shift = sjcl.bitArray.getPartial(last);\n    if (shift === 32) {\n      return a1.concat(a2);\n    } else {\n      return sjcl.bitArray._shiftRight(\n        a2,\n        shift,\n        last | 0,\n        a1.slice(0, a1.length - 1)\n      );\n    }\n  },\n\n  /**\n   * Find the length of an array of bits.\n   * @param {bitArray} a The array.\n   * @return {Number} The length of a, in bits.\n   */\n  bitLength: function (a) {\n    var l = a.length,\n      x;\n    if (l === 0) {\n      return 0;\n    }\n    x = a[l - 1];\n    return (l - 1) * 32 + sjcl.bitArray.getPartial(x);\n  },\n\n  /**\n   * Truncate an array.\n   * @param {bitArray} a The array.\n   * @param {Number} len The length to truncate to, in bits.\n   * @return {bitArray} A new array, truncated to len bits.\n   */\n  clamp: function (a, len) {\n    if (a.length * 32 < len) {\n      return a;\n    }\n    a = a.slice(0, Math.ceil(len / 32));\n    var l = a.length;\n    len = len & 31;\n    if (l > 0 && len) {\n      a[l - 1] = sjcl.bitArray.partial(\n        len,\n        a[l - 1] & (0x80000000 >> (len - 1)),\n        1\n      );\n    }\n    return a;\n  },\n\n  /**\n   * Make a partial word for a bit array.\n   * @param {Number} len The number of bits in the word.\n   * @param {Number} x The bits.\n   * @param {Number} [_end=0] Pass 1 if x has already been shifted to the high side.\n   * @return {Number} The partial word.\n   */\n  partial: function (len, x, _end) {\n    if (len === 32) {\n      return x;\n    }\n    return (_end ? x | 0 : x << (32 - len)) + len * 0x10000000000;\n  },\n\n  /**\n   * Get the number of bits used by a partial word.\n   * @param {Number} x The partial word.\n   * @return {Number} The number of bits used by the partial word.\n   */\n  getPartial: function (x) {\n    return Math.round(x / 0x10000000000) || 32;\n  },\n\n  /**\n   * Compare two arrays for equality in a predictable amount of time.\n   * @param {bitArray} a The first array.\n   * @param {bitArray} b The second array.\n   * @return {boolean} true if a == b; false otherwise.\n   */\n  equal: function (a, b) {\n    if (sjcl.bitArray.bitLength(a) !== sjcl.bitArray.bitLength(b)) {\n      return false;\n    }\n    var x = 0,\n      i;\n    for (i = 0; i < a.length; i++) {\n      x |= a[i] ^ b[i];\n    }\n    return x === 0;\n  },\n\n  /** Shift an array right.\n   * @param {bitArray} a The array to shift.\n   * @param {Number} shift The number of bits to shift.\n   * @param {Number} [carry=0] A byte to carry in\n   * @param {bitArray} [out=[]] An array to prepend to the output.\n   * @private\n   */\n  _shiftRight: function (a, shift, carry, out) {\n    var i,\n      last2 = 0,\n      shift2;\n    if (out === undefined) {\n      out = [];\n    }\n\n    for (; shift >= 32; shift -= 32) {\n      out.push(carry);\n      carry = 0;\n    }\n    if (shift === 0) {\n      return out.concat(a);\n    }\n\n    for (i = 0; i < a.length; i++) {\n      out.push(carry | (a[i] >>> shift));\n      carry = a[i] << (32 - shift);\n    }\n    last2 = a.length ? a[a.length - 1] : 0;\n    shift2 = sjcl.bitArray.getPartial(last2);\n    out.push(\n      sjcl.bitArray.partial(\n        (shift + shift2) & 31,\n        shift + shift2 > 32 ? carry : out.pop(),\n        1\n      )\n    );\n    return out;\n  },\n\n  /** xor a block of 4 words together.\n   * @private\n   */\n  _xor4: function (x, y) {\n    return [x[0] ^ y[0], x[1] ^ y[1], x[2] ^ y[2], x[3] ^ y[3]];\n  },\n\n  /** byteswap a word array inplace.\n   * (does not handle partial words)\n   * @param {sjcl.bitArray} a word array\n   * @return {sjcl.bitArray} byteswapped array\n   */\n  byteswapM: function (a) {\n    var i,\n      v,\n      m = 0xff00;\n    for (i = 0; i < a.length; ++i) {\n      v = a[i];\n      a[i] = (v >>> 24) | ((v >>> 8) & m) | ((v & m) << 8) | (v << 24);\n    }\n    return a;\n  },\n};\n/** @fileOverview Bit array codec implementations.\n *\n * @author Emily Stark\n * @author Mike Hamburg\n * @author Dan Boneh\n */\n\n/**\n * UTF-8 strings\n * @namespace\n */\nsjcl.codec.utf8String = {\n  /** Convert from a bitArray to a UTF-8 string. */\n  fromBits: function (arr) {\n    var out = '',\n      bl = sjcl.bitArray.bitLength(arr),\n      i,\n      tmp;\n    for (i = 0; i < bl / 8; i++) {\n      if ((i & 3) === 0) {\n        tmp = arr[i / 4];\n      }\n      out += String.fromCharCode(((tmp >>> 8) >>> 8) >>> 8);\n      tmp <<= 8;\n    }\n    return decodeURIComponent(escape(out));\n  },\n\n  /** Convert from a UTF-8 string to a bitArray. */\n  toBits: function (str) {\n    str = unescape(encodeURIComponent(str));\n    var out = [],\n      i,\n      tmp = 0;\n    for (i = 0; i < str.length; i++) {\n      tmp = (tmp << 8) | str.charCodeAt(i);\n      if ((i & 3) === 3) {\n        out.push(tmp);\n        tmp = 0;\n      }\n    }\n    if (i & 3) {\n      out.push(sjcl.bitArray.partial(8 * (i & 3), tmp));\n    }\n    return out;\n  },\n};\n/** @fileOverview Javascript SHA-256 implementation.\n *\n * An older version of this implementation is available in the public\n * domain, but this one is (c) Emily Stark, Mike Hamburg, Dan Boneh,\n * Stanford University 2008-2010 and BSD-licensed for liability\n * reasons.\n *\n * Special thanks to Aldo Cortesi for pointing out several bugs in\n * this code.\n *\n * @author Emily Stark\n * @author Mike Hamburg\n * @author Dan Boneh\n */\n\n/**\n * Context for a SHA-256 operation in progress.\n * @constructor\n */\nsjcl.hash.sha256 = function (hash) {\n  if (!this._key[0]) {\n    this._precompute();\n  }\n  if (hash) {\n    this._h = hash._h.slice(0);\n    this._buffer = hash._buffer.slice(0);\n    this._length = hash._length;\n  } else {\n    this.reset();\n  }\n};\n\n/**\n * Hash a string or an array of words.\n * @static\n * @param {bitArray|String} data the data to hash.\n * @return {bitArray} The hash value, an array of 16 big-endian words.\n */\nsjcl.hash.sha256.hash = function (data) {\n  return new sjcl.hash.sha256().update(data).finalize();\n};\n\nsjcl.hash.sha256.prototype = {\n  /**\n   * The hash's block size, in bits.\n   * @constant\n   */\n  blockSize: 512,\n\n  /**\n   * Reset the hash state.\n   * @return this\n   */\n  reset: function () {\n    this._h = this._init.slice(0);\n    this._buffer = [];\n    this._length = 0;\n    return this;\n  },\n\n  /**\n   * Input several words to the hash.\n   * @param {bitArray|String} data the data to hash.\n   * @return this\n   */\n  update: function (data) {\n    if (typeof data === 'string') {\n      data = sjcl.codec.utf8String.toBits(data);\n    }\n    var i,\n      b = (this._buffer = sjcl.bitArray.concat(this._buffer, data)),\n      ol = this._length,\n      nl = (this._length = ol + sjcl.bitArray.bitLength(data));\n    if (nl > 9007199254740991) {\n      throw new sjcl.exception.invalid('Cannot hash more than 2^53 - 1 bits');\n    }\n\n    if (typeof Uint32Array !== 'undefined') {\n      var c = new Uint32Array(b);\n      var j = 0;\n      for (i = 512 + ol - ((512 + ol) & 511); i <= nl; i += 512) {\n        this._block(c.subarray(16 * j, 16 * (j + 1)));\n        j += 1;\n      }\n      b.splice(0, 16 * j);\n    } else {\n      for (i = 512 + ol - ((512 + ol) & 511); i <= nl; i += 512) {\n        this._block(b.splice(0, 16));\n      }\n    }\n    return this;\n  },\n\n  /**\n   * Complete hashing and output the hash value.\n   * @return {bitArray} The hash value, an array of 8 big-endian words.\n   */\n  finalize: function () {\n    var i,\n      b = this._buffer,\n      h = this._h;\n\n    // Round out and push the buffer\n    b = sjcl.bitArray.concat(b, [sjcl.bitArray.partial(1, 1)]);\n\n    // Round out the buffer to a multiple of 16 words, less the 2 length words.\n    for (i = b.length + 2; i & 15; i++) {\n      b.push(0);\n    }\n\n    // append the length\n    b.push(Math.floor(this._length / 0x100000000));\n    b.push(this._length | 0);\n\n    while (b.length) {\n      this._block(b.splice(0, 16));\n    }\n\n    this.reset();\n    return h;\n  },\n\n  /**\n   * The SHA-256 initialization vector, to be precomputed.\n   * @private\n   */\n  _init: [],\n  /*\n   _init:[0x6a09e667,0xbb67ae85,0x3c6ef372,0xa54ff53a,0x510e527f,0x9b05688c,0x1f83d9ab,0x5be0cd19],\n   */\n\n  /**\n   * The SHA-256 hash key, to be precomputed.\n   * @private\n   */\n  _key: [],\n  /*\n   _key:\n     [0x428a2f98, 0x71374491, 0xb5c0fbcf, 0xe9b5dba5, 0x3956c25b, 0x59f111f1, 0x923f82a4, 0xab1c5ed5,\n      0xd807aa98, 0x12835b01, 0x243185be, 0x550c7dc3, 0x72be5d74, 0x80deb1fe, 0x9bdc06a7, 0xc19bf174,\n      0xe49b69c1, 0xefbe4786, 0x0fc19dc6, 0x240ca1cc, 0x2de92c6f, 0x4a7484aa, 0x5cb0a9dc, 0x76f988da,\n      0x983e5152, 0xa831c66d, 0xb00327c8, 0xbf597fc7, 0xc6e00bf3, 0xd5a79147, 0x06ca6351, 0x14292967,\n      0x27b70a85, 0x2e1b2138, 0x4d2c6dfc, 0x53380d13, 0x650a7354, 0x766a0abb, 0x81c2c92e, 0x92722c85,\n      0xa2bfe8a1, 0xa81a664b, 0xc24b8b70, 0xc76c51a3, 0xd192e819, 0xd6990624, 0xf40e3585, 0x106aa070,\n      0x19a4c116, 0x1e376c08, 0x2748774c, 0x34b0bcb5, 0x391c0cb3, 0x4ed8aa4a, 0x5b9cca4f, 0x682e6ff3,\n      0x748f82ee, 0x78a5636f, 0x84c87814, 0x8cc70208, 0x90befffa, 0xa4506ceb, 0xbef9a3f7, 0xc67178f2],\n   */\n\n  /**\n   * Function to precompute _init and _key.\n   * @private\n   */\n  _precompute: function () {\n    var i = 0,\n      prime = 2,\n      factor,\n      isPrime;\n\n    function frac(x) {\n      return ((x - Math.floor(x)) * 0x100000000) | 0;\n    }\n\n    for (; i < 64; prime++) {\n      isPrime = true;\n      for (factor = 2; factor * factor <= prime; factor++) {\n        if (prime % factor === 0) {\n          isPrime = false;\n          break;\n        }\n      }\n      if (isPrime) {\n        if (i < 8) {\n          this._init[i] = frac(Math.pow(prime, 1 / 2));\n        }\n        this._key[i] = frac(Math.pow(prime, 1 / 3));\n        i++;\n      }\n    }\n  },\n\n  /**\n   * Perform one cycle of SHA-256.\n   * @param {Uint32Array|bitArray} w one block of words.\n   * @private\n   */\n  _block: function (w) {\n    var i,\n      tmp,\n      a,\n      b,\n      h = this._h,\n      k = this._key,\n      h0 = h[0],\n      h1 = h[1],\n      h2 = h[2],\n      h3 = h[3],\n      h4 = h[4],\n      h5 = h[5],\n      h6 = h[6],\n      h7 = h[7];\n\n    /* Rationale for placement of |0 :\n     * If a value can overflow is original 32 bits by a factor of more than a few\n     * million (2^23 ish), there is a possibility that it might overflow the\n     * 53-bit mantissa and lose precision.\n     *\n     * To avoid this, we clamp back to 32 bits by |'ing with 0 on any value that\n     * propagates around the loop, and on the hash state h[].  I don't believe\n     * that the clamps on h4 and on h0 are strictly necessary, but it's close\n     * (for h4 anyway), and better safe than sorry.\n     *\n     * The clamps on h[] are necessary for the output to be correct even in the\n     * common case and for short inputs.\n     */\n    for (i = 0; i < 64; i++) {\n      // load up the input word for this round\n      if (i < 16) {\n        tmp = w[i];\n      } else {\n        a = w[(i + 1) & 15];\n        b = w[(i + 14) & 15];\n        tmp = w[i & 15] =\n          (((a >>> 7) ^ (a >>> 18) ^ (a >>> 3) ^ (a << 25) ^ (a << 14)) +\n            ((b >>> 17) ^ (b >>> 19) ^ (b >>> 10) ^ (b << 15) ^ (b << 13)) +\n            w[i & 15] +\n            w[(i + 9) & 15]) |\n          0;\n      }\n\n      tmp =\n        tmp +\n        h7 +\n        ((h4 >>> 6) ^\n          (h4 >>> 11) ^\n          (h4 >>> 25) ^\n          (h4 << 26) ^\n          (h4 << 21) ^\n          (h4 << 7)) +\n        (h6 ^ (h4 & (h5 ^ h6))) +\n        k[i]; // | 0;\n\n      // shift register\n      h7 = h6;\n      h6 = h5;\n      h5 = h4;\n      h4 = (h3 + tmp) | 0;\n      h3 = h2;\n      h2 = h1;\n      h1 = h0;\n\n      h0 =\n        (tmp +\n          ((h1 & h2) ^ (h3 & (h1 ^ h2))) +\n          ((h1 >>> 2) ^\n            (h1 >>> 13) ^\n            (h1 >>> 22) ^\n            (h1 << 30) ^\n            (h1 << 19) ^\n            (h1 << 10))) |\n        0;\n    }\n\n    h[0] = (h[0] + h0) | 0;\n    h[1] = (h[1] + h1) | 0;\n    h[2] = (h[2] + h2) | 0;\n    h[3] = (h[3] + h3) | 0;\n    h[4] = (h[4] + h4) | 0;\n    h[5] = (h[5] + h5) | 0;\n    h[6] = (h[6] + h6) | 0;\n    h[7] = (h[7] + h7) | 0;\n  },\n};\n\nexport default sjcl;\n","// eslint-disable-next-line require-jsdoc\nfunction base64URLEncode(str) {\n  return btoa(str).replace(/\\+/g, '-').replace(/\\//g, '_').replace(/=+$/, '');\n}\n\nexport default {\n  base64URLEncode: base64URLEncode,\n};\n","import Popup from './authentication/popup';\nimport Redirect from './authentication/redirect';\nimport Iframe from './authentication/iframe';\nimport Transaction from './authentication/transaction';\nimport qs from 'qs';\nimport sjcl from './vendor/sjcl';\nimport {pick} from './helpers/object';\nimport encoding from './helpers/encoding';\n\nimport random from './helpers/random';\n/**\n * Accounts SDK main class\n */\nexport default class AccountsSDK {\n  /**\n   * Accounts SDK constructor\n   *\n   * @constructor\n   * @param {Object} options\n   * @param {String} options.client_id registered client ID\n   * @param {String} [options.prompt=''] use `consent` to force consent prompt in popup and redirect flows\n   * @param {String} [options.response_type='token'] OAuth response type, use `token` or `code`\n   * @param {String} [options.popup_flow='auto'] `auto` - close popup when not required, `manual` - always show popup\n   * @param {String} [options.state=''] OAuth state param\n   * @param {Boolean} [options.verify_state=true] check if state matches after redirect\n   * @param {String} [options.scope=null] request exact scopes - must be configured for a given client id\n   * @param {String} [options.redirect_uri=''] OAuth redirect uri - default current location\n   * @param {String} [options.email_hint=''] fill in email in forms\n   * @param {String} [options.server_url='https://accounts.livechat.com'] authorization server url\n   * @param {String} [options.path=''] option to provide a path when loading accounts, for example '/signup'\n   * @param {Object} [options.tracking] tracking querystring params\n   * @param {Object} [options.transaction] options for transaction manager\n   * @param {String} [options.transaction.namespace='com.livechat.accounts'] transaction keys prefix\n   * @param {Number} [options.transaction.key_length=32] transaction random state length\n   * @param {Boolean} [options.transaction.force_local_storage=false] try to use local storage instead of cookies\n   * @param {Object} [options.pkce] PKCE configuration\n   * @param {Boolean} [options.pkce.enabled=true] Oauth 2.1 PKCE extension enabled\n   * @param {String} [options.pkce.code_verifier] override auto generated code verifier\n   * @param {Number} [options.pkce.code_verifier_length=128] code verifier length, between 43 and 128 characters https://tools.ietf.org/html/rfc7636#section-4.1\n   * @param {String} [options.pkce.code_challange_method='S256'] code challange method, use `S256` or `plain`\n   */\n  constructor(options = {}) {\n    if (options.client_id == null) {\n      throw new Error('client id not provided');\n    }\n\n    const defaultOptions = {\n      prompt: '',\n      response_type: 'token',\n      popup_flow: 'auto',\n      state: '',\n      verify_state: true,\n      verify_callback: true,\n      scope: null,\n      redirect_uri: '',\n      email_hint: null,\n      server_url: 'https://accounts.livechat.com',\n      tracking: {\n        utm_source: 'accounts.livechat.com',\n        utm_medium: 'accounts-sdk',\n      },\n      transaction: {\n        namespace: 'com.livechat.accounts',\n        key_length: 32,\n        force_local_storage: false,\n      },\n      pkce: {\n        enabled: true,\n        code_verifier_length: 128,\n        code_challange_method: 'S256',\n      },\n    };\n\n    this.options = Object.assign({}, defaultOptions, options);\n    this.transaction = new Transaction(this.options);\n  }\n\n  /**\n   * use iframe for authorization\n   * @param {Object} options for overriding defaults\n   * @return {Object} instance of an iframe flow\n   */\n  iframe(options = {}) {\n    const localOptions = Object.assign({}, this.options, options);\n    return new Iframe(this, localOptions);\n  }\n\n  /**\n   * use popup for authorization\n   * @param {Object} options for overriding defaults\n   * @return {Object} instance of a popup flow\n   */\n  popup(options = {}) {\n    const localOptions = Object.assign({}, this.options, options);\n    return new Popup(this, localOptions);\n  }\n\n  /**\n   * use redirect for authorization\n   * @param {Object} options for overriding defaults\n   * @return {Object} instance of a redirect flow\n   */\n  redirect(options = {}) {\n    const localOptions = Object.assign({}, this.options, options);\n    return new Redirect(this, localOptions);\n  }\n\n  /**\n   * create authorization url\n   * @param {Object} options for overriding defaults\n   * @param {String} flow set 'button' for popup and iframe\n   * @return {string} generated url\n   */\n  authorizeURL(options = {}, flow = '') {\n    const localOptions = Object.assign({}, this.options, options);\n\n    if (!localOptions.redirect_uri) {\n      localOptions.redirect_uri =\n        window.location.origin + window.location.pathname;\n    }\n\n    const params = pick(localOptions, [\n      'client_id',\n      'redirect_uri',\n      'state',\n      'response_type',\n      'scope',\n      'prompt',\n    ]);\n\n    Object.assign(params, localOptions.tracking);\n\n    if (params.scope === null) {\n      delete params.scope;\n    }\n\n    if (flow != null) {\n      params.flow = flow;\n    }\n\n    if (localOptions.email_hint) {\n      params.email = localOptions.email_hint;\n    }\n\n    let url = localOptions.server_url;\n    if (localOptions.popup_flow === 'manual') {\n      url += '/signin';\n    }\n\n    if (localOptions.path) {\n      url += localOptions.path;\n    }\n\n    if (localOptions.response_type === 'code' && localOptions.pkce.enabled) {\n      const codeVerifier =\n        localOptions.pkce.code_verifier ||\n        random.string(localOptions.pkce.code_verifier_length);\n\n      switch (localOptions.pkce.code_challange_method) {\n        case 'S256':\n          const codeChallenge = sjcl.hash.sha256.hash(codeVerifier);\n          Object.assign(params, {\n            code_verifier: codeVerifier,\n            code_challenge: encoding.base64URLEncode(codeChallenge),\n            code_challenge_method: localOptions.pkce.code_challange_method,\n          });\n          break;\n\n        default:\n          Object.assign(params, {\n            code_verifier: codeVerifier,\n            code_challenge: codeVerifier,\n            code_challenge_method: localOptions.pkce.code_challange_method,\n          });\n      }\n    }\n\n    this.transaction.generate(params);\n    delete params.code_verifier;\n    return url + '?' + qs.stringify(params);\n  }\n\n  /**\n   * This function verifies if redirect transaction params are valid.\n   * @param {Object} authorizeData authorize data to validate and return transaction state - redirect state, pkce code verifier\n   * @return {Object} transaction state if valid, null otherwise\n   */\n  verify(authorizeData) {\n    const transactionData = this.transaction.get(authorizeData.state);\n\n    if (authorizeData.state && this.options.verify_state) {\n      if (transactionData.state != authorizeData.state) {\n        return null;\n      }\n    }\n\n    return transactionData;\n  }\n}\n"],"names":["extend","error","oauth_exception","Object","assign","description","identity_exception","invalid_request","unauthorized_client","access_denied","unsupported_response_type","unauthorized","Listener","options","listening","receiveMessage","bind","timeout","callback","_listenerInited","tid","setTimeout","stop","window","addEventListener","clearTimeout","removeEventListener","event","origin","server_url","replace","data","errors","scopes","scope","expires_in","parseInt","Popup","sdk","Promise","resolve","reject","url","authorizeURL","w","h","left","screen","width","top","height","listener","start","err","authorizeData","open","document","requestStorageAccess","promise","then","has","prototype","hasOwnProperty","isArray","Array","hexTable","array","i","push","toString","toUpperCase","compactQueue","queue","length","item","pop","obj","prop","compacted","j","arrayToObject","source","plainObjects","create","merge","target","allowPrototypes","call","concat","mergeTarget","forEach","targetItem","keys","reduce","acc","key","value","assignSingleSource","decode","str","decoder","charset","strWithoutPlus","unescape","decodeURIComponent","e","encode","defaultEncoder","string","Symbol","String","escape","$0","slice","out","c","charCodeAt","charAt","compact","o","refs","val","indexOf","isRegExp","isBuffer","constructor","combine","a","b","maybeMap","fn","mapped","percentTwenties","Format","RFC1738","RFC3986","util","formatters","arrayPrefixGenerators","brackets","prefix","comma","indices","repeat","pushToArray","arr","valueOrArray","apply","toISO","Date","toISOString","defaultFormat","formats","defaults","addQueryPrefix","allowDots","charsetSentinel","delimiter","encoder","utils","encodeValuesOnly","format","formatter","serializeDate","date","skipNulls","strictNullHandling","isNonNullishPrimitive","v","stringify","object","generateArrayPrefix","filter","sort","join","keyValue","values","objKeys","keyPrefix","normalizeStringifyOptions","opts","undefined","TypeError","arrayFormat","joined","arrayLimit","depth","ignoreQueryPrefix","interpretNumericEntities","parameterLimit","parseArrays","numberStr","fromCharCode","parseArrayValue","split","isoSentinel","parseValues","parseQueryStringValues","cleanStr","limit","Infinity","parts","skipIndex","part","bracketEqualsPos","pos","encodedVal","parseObject","chain","valuesParsed","leaf","root","cleanRoot","index","isNaN","parseKeys","parseQueryStringKeys","givenKey","child","segment","exec","parent","normalizeParseOptions","tempObj","newObj","parse","pick","prev","Redirect","location","requiredFields","response_type","qs","hash","substring","every","field","search","Iframe","cb","removeIframe","iframe","createElement","setAttribute","iframeID","style","position","right","opacity","visibility","body","appendChild","client_id","ref","getElementById","parentNode","removeChild","bytes","Uint8Array","result","cryptoObj","crypto","msCrypto","random","Math","floor","getRandomValues","DummyStorage","getItem","removeItem","setItem","factory","registeredInModuleLoader","module","OldCookies","Cookies","api","noConflict","arguments","attributes","s","init","converter","set","path","expires","toUTCString","JSON","test","write","encodeURIComponent","stringifiedAttributes","attributeName","cookie","get","json","jar","cookies","name","read","getJSON","remove","withConverter","CookieStorage","Cookie","params","StorageHandler","storage","force_local_storage","localStorage","console","warn","failover","Storage","handler","_","Transaction","transaction","state","key_length","namespace","code_verifier","transactionData","clear","sjcl","cipher","keyexchange","mode","misc","codec","exception","corrupt","message","invalid","bug","notReady","bitArray","bitSlice","bstart","bend","_shiftRight","clamp","extract","blength","x","sh","a1","a2","last","shift","getPartial","bitLength","l","len","ceil","partial","_end","round","equal","carry","last2","shift2","_xor4","y","byteswapM","m","utf8String","fromBits","bl","tmp","toBits","sha256","_key","_precompute","_h","_buffer","_length","reset","update","finalize","blockSize","_init","ol","nl","Uint32Array","_block","subarray","splice","prime","factor","isPrime","frac","pow","k","h0","h1","h2","h3","h4","h5","h6","h7","base64URLEncode","btoa","AccountsSDK","Error","defaultOptions","prompt","popup_flow","verify_state","verify_callback","redirect_uri","email_hint","tracking","utm_source","utm_medium","pkce","enabled","code_verifier_length","code_challange_method","localOptions","flow","pathname","email","codeVerifier","codeChallenge","code_challenge","encoding","code_challenge_method","generate"],"mappings":"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"}